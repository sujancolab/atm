(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{26:function(e,t,a){"use strict";(function(e){var s=a(8),i=a.n(s);t.a={components:{VueTagsInput:i()},data:()=>({categories:[],sub_categories:[],sites:[],selected_machine:"",users:[],machines:[],Tickets:{},editmode:!1,MaterialCost:null,ServiceCost:null,form:new Form({id:"",site_id:"",category_id:"",sub_category_id:"",free_service_no:"",ticket_type:"Periodic Maintenance",service_type:"Paid Service",machine_id:"",ticket_no:"",vendor_id:"",likely_date:"",estimated_material_cost:"",estimated_service_cost:"",maintenance_provider:"vendor"}),stages:[{id:"",stage_no:"",description:"",file:"",new_file:""}],formclose:new Form({id:"",edit_type:"closeticket",ticket_type:"Periodic Maintenance",actual_date:"",actual_material_cost:"",actual_service_cost:"",current_run_hour:"",current_km_run:"",current_production_fig:"",production_loss:"",production_loss_amount:"",status:"Closed",vendor_resolve_date:"",vendor_attain_date:"",vendor_response_date:"",vendor_call_date:""}),pop_machine:""}),methods:{getLabel:e=>"object"==typeof e?e.far_no+" - "+e.name:e,AddStage(){this.stages.push({id:"",stage_no:"",description:"",file:"",new_file:""})},async choose_stage_file(e,t){this.stages[t].new_file=e.target.files[0]},async uploadMaterialCost(e){this.MaterialCost=e.target.files},async uploadServiceCost(e){this.ServiceCost=e.target.files},getResults(e=1){this.$Progress.start(),axios.get("/api/ticket?page="+e).then(({data:e})=>this.Tickets=e.data),this.$Progress.finish()},submitCloseTicket(){this.$validator.validateAll("closeticket").then(async t=>{if(t){let t=this.$loading.show({container:this.$refs.vps_submit_pop});this.formclose.put("/api/ticket/"+this.formclose.id).then(a=>{a.data.success&&(e("#closemodal").modal("hide"),this.$validator.reset(),this.formclose.reset(),Toast.fire({icon:"success",title:a.data.message}),this.upload_files(this.formclose.id,"actual"),this.loadTickets()),t.hide()}).catch(()=>{t.hide(),void 0!==err.response.data&&this.$setErrorsFromResponse(err.response.data)})}})},closeModal(t){e("#closemodal").modal("show"),this.$validator.reset(),this.formclose.reset(),this.$refs.fileactualservice.value=null,this.$refs.fileactualmaterial.value=null,this.pop_machine=t.machine,this.formclose.fill(t),this.formclose.edit_type="closeticket"},editModal(t){this.editmode=!0,this.$validator.pause(),this.form.reset(),this.$refs.fileservice.value=null,this.$refs.filematerial.value=null,this.MaterialCost=null,this.ServiceCost=null,e("#addNew").modal("show"),this.form.fill(t),this.stages=[],t.stages&&(this.stages=t.stages),this.$validator.resume()},newModal(){this.stages=[],this.AddStage(),this.editmode=!1,this.$validator.reset(),this.$validator.pause(),this.form.reset(),this.$refs.fileservice.value=null,this.$refs.filematerial.value=null,this.MaterialCost=null,this.ServiceCost=null,e("#addNew").modal("show"),this.$validator.resume()},loadTickets(){this.$gate.isAdmin()&&axios.get("/api/ticket").then(({data:e})=>this.Tickets=e.data)},async upload_files(e,t=!1){this.MaterialCost&&this.MaterialCost.forEach(a=>{var s=new FormData;s.append("file",a),t?s.append("file_type","Actual Estimated Material"):s.append("file_type","Estimated Material"),s.append("ticket_id",e),axios.post("api/ticket/files",s).then(e=>{console.log("gallery uploaded")})}),this.ServiceCost&&this.ServiceCost.forEach(a=>{var s=new FormData;s.append("file",a),t?s.append("file_type","Actual Estimated Service"):s.append("file_type","Estimated Service"),s.append("ticket_id",e),axios.post("api/ticket/files",s).then(e=>{console.log("gallery uploaded")})})},async upload_stages(e){this.stages&&this.stages.forEach(t=>{var a=new FormData;a.append("id",t.id),a.append("stage_no",t.stage_no),a.append("description",t.description),a.append("new_file",t.new_file),a.append("file",t.file),a.append("ticket_id",e),axios.post("api/ticket/stages",a).then(e=>{console.log("stages uploaded")})})},submitTicket(){this.$validator.validateAll().then(async t=>{if(t){let t=this.$loading.show({container:this.$refs.vps_submit_pop});this.form.id?this.form.put("/api/ticket/"+this.form.id).then(a=>{a.data.success&&(e("#addNew").modal("hide"),Toast.fire({icon:"success",title:a.data.message}),this.upload_stages(this.form.id),this.upload_files(this.form.id),this.loadTickets()),t.hide()}).catch(()=>{t.hide(),void 0!==err.response.data&&this.$setErrorsFromResponse(err.response.data)}):this.form.post("/api/ticket").then(a=>{a.data.success&&(e("#addNew").modal("hide"),Toast.fire({icon:"success",title:a.data.message}),this.upload_files(a.data.data.id),this.loadTickets()),t.hide()}).catch(()=>{t.hide(),void 0!==err.response.data&&this.$setErrorsFromResponse(err.response.data)})}})},async check_free_service(){this.selected_machine&&(this.selected_machine.completed_free_service>=this.selected_machine.free_service_no?(this.form.service_type="Paid Service",this.form.free_service_no=""):this.form.free_service_no=this.selected_machine.completed_free_service+1,this.selected_machine&&"New"==this.selected_machine.machine_type&&this.form.service_type)},async get_machine(){axios.get("/api/ticket_machine",{params:{site_id:this.form.site_id,category_id:this.form.category_id,sub_category_id:this.form.sub_category_id}}).then(e=>{this.machines=e.data.data}).catch(()=>console.warn("Oh. Something went wrong"))}},mounted(){},created(){this.loadTickets()},beforeCreate(){axios.get("api/get_pre_machine").then(e=>{this.categories=e.data.data.Category,this.sites=e.data.data.sites}),axios.get("/api/initial_ticket").then(e=>{this.users=e.data.data.vendors,this.machines=e.data.data.machines}).catch(()=>console.warn("Oh. Something went wrong"))},watch:{async"form.sub_category_id"(e,t){e&&this.get_machine()},async"form.site_id"(e,t){e&&this.get_machine()},"form.category_id":{handler:function(e,t){e&&(axios.get("api/category/"+e).then(e=>{this.sub_categories=e.data.data}),this.get_machine())},deep:!0,initial:!0},async"form.maintenance_provider"(e){axios.get("api/user/list",{params:{type:e}}).then(e=>{this.users=e.data.data}).catch(()=>console.warn("Oh. Something went wrong"))},async"form.machine_id"(e){this.selected_machine=this.machines.find(t=>t.id===e),await this.check_free_service()},async"form.service_type"(e){"Free Service"==e&&await this.check_free_service()}}}}).call(this,a(4))},369:function(e,t,a){"use strict";a.r(t);var s=a(26),i=a(2),r=Object(i.a)(s.a,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"content"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[e.$gate.isAdmin()?a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[e._v("Ticket List")]),e._v(" "),a("div",{staticClass:"card-tools"},[a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:e.newModal}},[a("i",{staticClass:"fa fa-plus-square"}),e._v("\n                                Add New\n                            ")])])]),e._v(" "),a("div",{staticClass:"card-body table-responsive p-0"},[a("table",{staticClass:"table table-hover"},[e._m(0),e._v(" "),a("tbody",e._l(e.Tickets.data,(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.ticket_no))]),e._v(" "),a("td",{staticClass:"text-capitalize"},[e._v(e._s(t.machine.name))]),e._v(" "),a("td",[e._v(e._s(t.machine.far_no))]),e._v(" "),a("td",[e._v(e._s(e._f("myDate")(t.created_at)))]),e._v(" "),a("td",[e._v(e._s(e._f("myDate")(t.likely_date)))]),e._v(" "),a("td",{domProps:{innerHTML:e._s(t.status)}}),e._v(" "),a("td",[a("a",{staticClass:"btn btn-success",attrs:{href:"javascript:void(0);"},on:{click:function(a){return e.editModal(t)}}},[e._v("\n                                            Edit\n                                        ")]),e._v(" "),a("a",{staticClass:"btn btn-danger",attrs:{href:"javascript:void(0);",title:"Close ticket"},on:{click:function(a){return e.closeModal(t)}}},[e._v("\n                                            Close\n                                        ")])])])})),0)])]),e._v(" "),a("div",{staticClass:"card-footer"},[a("pagination",{attrs:{data:e.Tickets},on:{"pagination-change-page":e.getResults}})],1)]):e._e()])]),e._v(" "),e.$gate.isAdmin()?e._e():a("div",[a("not-found")],1)]),e._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"addNew",tabindex:"-1",role:"dialog","aria-labelledby":"addNew","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{directives:[{name:"show",rawName:"v-show",value:!e.editmode,expression:"!editmode"}],staticClass:"modal-title"},[e._v("Create New Ticket")]),e._v(" "),a("h5",{directives:[{name:"show",rawName:"v-show",value:e.editmode,expression:"editmode"}],staticClass:"modal-title"},[e._v("Edit Ticket")]),e._v(" "),e._m(1)]),e._v(" "),a("form",{on:{submit:function(t){return t.preventDefault(),e.submitTicket()}}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Machine Site")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"required",class:{"is-invalid":e.verrors.has("site_id")},attrs:{label:"site_name",reduce:function(e){return e.id},options:e.sites,placeholder:"Choose Site ...","data-vv-as":"site",name:"site_id",disabled:""!=e.form.id},model:{value:e.form.site_id,callback:function(t){e.$set(e.form,"site_id",t)},expression:"form.site_id"}}),e._v(" "),e.verrors.has("site_id")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                                        "+e._s(e.verrors.first("site_id"))+"\n                                    ")]):e._e()],1)]),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Machine Category")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"required",class:{"is-invalid":e.verrors.has("category_id")},attrs:{label:"name",reduce:function(e){return e.id},options:e.categories,placeholder:"Choose Category ...","data-vv-as":"Category",name:"category_id",disabled:""!=e.form.id},model:{value:e.form.category_id,callback:function(t){e.$set(e.form,"category_id",t)},expression:"form.category_id"}}),e._v(" "),e.verrors.has("category_id")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                                        "+e._s(e.verrors.first("category_id"))+"\n                                    ")]):e._e()],1)]),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Machine Description")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"required",class:{"is-invalid":e.verrors.has("sub_category_id")},attrs:{label:"name",reduce:function(e){return e.id},options:e.sub_categories,placeholder:"Choose description ...","data-vv-as":"description",name:"sub_category_id",disabled:""!=e.form.id},model:{value:e.form.sub_category_id,callback:function(t){e.$set(e.form,"sub_category_id",t)},expression:"form.sub_category_id"}}),e._v(" "),e.verrors.has("sub_category_id")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                                        "+e._s(e.verrors.first("sub_category_id"))+"\n                                    ")]):e._e()],1)]),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Select Machine")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":e.verrors.has("machine_id")},attrs:{label:"name","get-option-label":e.getLabel,reduce:function(e){return e.id},options:e.machines,placeholder:"Enter machines ...",name:"machine_id","data-vv-as":"Select machine",disabled:""!=e.form.id},model:{value:e.form.machine_id,callback:function(t){e.$set(e.form,"machine_id",t)},expression:"form.machine_id"}}),e._v(" "),e.verrors.has("machine_id")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(e._s(e.verrors.first("machine_id")))]):e._e()],1)]),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Service Type")]),e._v(" "),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.service_type,expression:"form.service_type"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"customRadio1",name:"customRadio",value:"Paid Service",disabled:""!=e.form.id},domProps:{checked:e._q(e.form.service_type,"Paid Service")},on:{change:function(t){return e.$set(e.form,"service_type","Paid Service")}}}),e._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"customRadio1"}},[e._v("Paid Service")])]),e._v(" "),a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.service_type,expression:"form.service_type"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"customRadio2",name:"customRadio",value:"Free Service",disabled:e.selected_machine&&e.selected_machine.completed_free_service>=e.selected_machine.free_service_no||""!=e.form.id},domProps:{checked:e._q(e.form.service_type,"Free Service")},on:{change:function(t){return e.$set(e.form,"service_type","Free Service")}}}),e._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"customRadio2"}},[e._v("Free Service")])])])]),e._v(" "),"Free Service"==e.form.service_type?a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Free service no")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.free_service_no,expression:"form.free_service_no"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("free_service_no")},attrs:{type:"text",name:"free_service_no","data-vv-as":"free service no",readonly:""},domProps:{value:e.form.free_service_no},on:{input:function(t){t.target.composing||e.$set(e.form,"free_service_no",t.target.value)}}}),e._v(" "),e.verrors.has("free_service_no")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                                        "+e._s(e.verrors.first("free_service_no")))]):e._e()])]):e._e(),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Ticket Type")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.ticket_type,expression:"form.ticket_type"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("ticket_type")},attrs:{name:"ticket_type","data-vv-as":"Ticket Type",disabled:""!=e.form.id},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"ticket_type",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"Periodic Maintenance"}},[e._v("Periodic Maintenance")]),e._v(" "),a("option",{attrs:{value:"Breakdown Maintenance"}},[e._v("Breakdown Maintenance")])]),e._v(" "),e.verrors.has("ticket_type")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                                        "+e._s(e.verrors.first("ticket_type"))+"\n                                    ")]):e._e()])]),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Maintenance Provider")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.maintenance_provider,expression:"form.maintenance_provider"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("maintenance_provider")},attrs:{name:"maintenance_provider","data-vv-as":"Maintenance Provider"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"maintenance_provider",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"vendor"}},[e._v("Vendor")]),e._v(" "),a("option",{attrs:{value:"user"}},[e._v("Internal User")])]),e._v(" "),e.verrors.has("maintenance_provider")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(e._s(e.verrors.first("maintenance_provider")))]):e._e()])]),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Select "+e._s("user"==e.form.maintenance_provider?"user":"vendor")+"\n                                    ")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":e.verrors.has("vendor_id")},attrs:{label:"name",reduce:function(e){return e.id},options:e.users,placeholder:"Enter users ...",name:"vendor_id","data-vv-as":"Select vendor"},model:{value:e.form.vendor_id,callback:function(t){e.$set(e.form,"vendor_id",t)},expression:"form.vendor_id"}}),e._v(" "),e.verrors.has("vendor_id")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(e._s(e.verrors.first("vendor_id")))]):e._e()],1)]),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Likely Date of Maintenance")]),e._v(" "),a("datetime",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":e.verrors.has("likely_date")},attrs:{name:"likely_date","input-class":"form-control","data-vv-as":"Likely Date",disabled:""!=e.form.id},model:{value:e.form.likely_date,callback:function(t){e.$set(e.form,"likely_date",t)},expression:"form.likely_date"}}),e._v(" "),e.verrors.has("likely_date")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(e._s(e.verrors.first("likely_date")))]):e._e()],1)]),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Estimated Material cost")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.estimated_material_cost,expression:"form.estimated_material_cost"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("estimated_material_cost")},attrs:{type:"text",name:"estimated_material_cost","data-vv-as":"Estimated Material cost",disabled:""!=e.form.id},domProps:{value:e.form.estimated_material_cost},on:{input:function(t){t.target.composing||e.$set(e.form,"estimated_material_cost",t.target.value)}}}),e._v(" "),e.verrors.has("estimated_material_cost")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(" "+e._s(e.verrors.first("estimated_material_cost")))]):e._e()])]),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" Estimated Material cost PDF")]),e._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],ref:"filematerial",staticClass:"form-control",class:{"is-invalid":e.verrors.has("material_cost")},attrs:{type:"file",multiple:"",name:"material_cost","data-vv-as":"Estimated Material cost"},on:{change:e.uploadMaterialCost}}),e._v(" "),e.verrors.has("material_cost")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(" "+e._s(e.verrors.first("material_cost")))]):e._e()])]),e._v(" "),"Paid Service"==e.form.service_type&&"vendor"==e.form.maintenance_provider?a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Estimated Service cost")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.estimated_service_cost,expression:"form.estimated_service_cost"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("estimated_service_cost")},attrs:{type:"text",name:"estimated_service_cost","data-vv-as":"Estimated Service cost",disabled:""!=e.form.id},domProps:{value:e.form.estimated_service_cost},on:{input:function(t){t.target.composing||e.$set(e.form,"estimated_service_cost",t.target.value)}}}),e._v(" "),e.verrors.has("estimated_service_cost")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(" "+e._s(e.verrors.first("estimated_service_cost")))]):e._e()])]):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"Paid Service"==e.form.service_type&&"vendor"==e.form.maintenance_provider,expression:"form.service_type == 'Paid Service' && form.maintenance_provider == 'vendor'"}],staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" Estimated Service cost ")]),e._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],ref:"fileservice",staticClass:"form-control",class:{"is-invalid":e.verrors.has("service_cost")},attrs:{type:"file",multiple:"",name:"service_cost","data-vv-as":"Estimated Service cost"},on:{change:e.uploadServiceCost}}),e._v(" "),e.verrors.has("service_cost")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(" "+e._s(e.verrors.first("service_cost")))]):e._e()])]),e._v(" "),e.form.id?a("div",{staticClass:"col-12"},[a("h3",[e._v("Stage")]),e._v(" "),e._l(e.stages,(function(t,s){return[a("div",{staticClass:"row pb-2"},[a("div",{staticClass:"col-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.stage_no,expression:"field.stage_no"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("stage_no")},attrs:{name:"stage_no"},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(t,"stage_no",a.target.multiple?s:s[0])}}},[a("option",{attrs:{value:"",disabled:""}},[e._v("Select stage")]),e._v(" "),e._l(6,(function(t){return a("option",{key:t,domProps:{value:"Stage "+t}},[e._v("\n                                                    Stage "+e._s(t))])}))],2)]),e._v(" "),a("div",{staticClass:"col-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"field.description"}],staticClass:"form-control",attrs:{placeholder:"Enter Description"},domProps:{value:t.description},on:{input:function(a){a.target.composing||e.$set(t,"description",a.target.value)}}})]),e._v(" "),a("div",{staticClass:"col-3"},[a("input",{staticClass:"form-control",attrs:{type:"file",name:"cfile"+s,placeholder:"choose file"},on:{change:function(t){return e.choose_stage_file(t,s)}}}),e._v(" "),a("br"),e._v(" "),t.file?a("a",{attrs:{href:e.set_image(t.file),target:"_blank"}},[e._v("View file")]):e._e()])])]})),e._v(" "),a("button",{staticClass:"btn btn-success float-right",attrs:{type:"button"},on:{click:e.AddStage}},[e._v("Add +")])],2):e._e()])]),e._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Close")]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:e.editmode,expression:"editmode"}],staticClass:"btn btn-success",attrs:{type:"submit"}},[e._v("Update")]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:!e.editmode,expression:"!editmode"}],staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Create")])])])])])]),e._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"closemodal",tabindex:"-1",role:"dialog","aria-labelledby":"closemodal","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[e._m(2),e._v(" "),a("form",{attrs:{"data-vv-scope":"closeticket"},on:{submit:function(t){return t.preventDefault(),e.submitCloseTicket()}}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Actual Date")]),e._v(" "),a("datetime",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":e.verrors.has("closeticket.actual_date")},attrs:{name:"actual_date","input-class":"form-control","data-vv-as":"Actual Date"},model:{value:e.formclose.actual_date,callback:function(t){e.$set(e.formclose,"actual_date",t)},expression:"formclose.actual_date"}}),e._v(" "),e.verrors.has("closeticket.actual_date")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(e._s(e.verrors.first("closeticket.actual_date")))]):e._e()],1)]),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Actual Material cost")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formclose.actual_material_cost,expression:"formclose.actual_material_cost"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.actual_material_cost")},attrs:{type:"text",name:"actual_material_cost","data-vv-as":"Actual Material cost"},domProps:{value:e.formclose.actual_material_cost},on:{input:function(t){t.target.composing||e.$set(e.formclose,"actual_material_cost",t.target.value)}}}),e._v(" "),e.verrors.has("closeticket.actual_material_cost")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(" "+e._s(e.verrors.first("closeticket.actual_material_cost")))]):e._e()])]),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" Actual Material cost PDF")]),e._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],ref:"fileactualmaterial",staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.material_cost")},attrs:{type:"file",multiple:"",name:"material_cost","data-vv-as":"Actual Material cost"},on:{change:e.uploadMaterialCost}}),e._v(" "),e.verrors.has("closeticket.material_cost")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(" "+e._s(e.verrors.first("closeticket.material_cost")))]):e._e()])]),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Actual Service cost")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formclose.actual_service_cost,expression:"formclose.actual_service_cost"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.actual_service_cost")},attrs:{type:"text",name:"actual_service_cost","data-vv-as":"Actual Service cost"},domProps:{value:e.formclose.actual_service_cost},on:{input:function(t){t.target.composing||e.$set(e.formclose,"actual_service_cost",t.target.value)}}}),e._v(" "),e.verrors.has("closeticket.actual_service_cost")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(" "+e._s(e.verrors.first("closeticket.actual_service_cost")))]):e._e()])]),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" Actual Service cost PDF ")]),e._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],ref:"fileactualservice",staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.service_cost")},attrs:{type:"file",multiple:"",name:"service_cost","data-vv-as":"Actual Service cost"},on:{change:e.uploadServiceCost}}),e._v(" "),e.verrors.has("closeticket.service_cost")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(" "+e._s(e.verrors.first("closeticket.service_cost")))]):e._e()])]),e._v(" "),e.pop_machine.is_consumtion_hr_run?a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Current Run hour ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formclose.current_run_hour,expression:"formclose.current_run_hour"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.current_run_hour")},attrs:{name:"current_run_hour","data-vv-as":"Current Run hour"},domProps:{value:e.formclose.current_run_hour},on:{input:function(t){t.target.composing||e.$set(e.formclose,"current_run_hour",t.target.value)}}}),e._v(" "),e.verrors.has("closeticket.current_run_hour")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                                        "+e._s(e.verrors.first("closeticket.current_run_hour")))]):e._e()])]):e._e(),e._v(" "),e.pop_machine.is_consumtion_km_run?a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" Current KM Run ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formclose.current_km_run,expression:"formclose.current_km_run"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.current_km_run")},attrs:{name:"current_km_run","data-vv-as":"Current KM hour"},domProps:{value:e.formclose.current_km_run},on:{input:function(t){t.target.composing||e.$set(e.formclose,"current_km_run",t.target.value)}}}),e._v(" "),e.verrors.has("closeticket.current_km_run")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(e._s(e.verrors.first("closeticket.current_km_run")))]):e._e()])]):e._e(),e._v(" "),e.pop_machine.is_production_fig?a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" Current Production fig ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formclose.current_production_fig,expression:"formclose.current_production_fig"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.current_production_fig")},attrs:{name:"current_production_fig","data-vv-as":"Current Production fig"},domProps:{value:e.formclose.current_production_fig},on:{input:function(t){t.target.composing||e.$set(e.formclose,"current_production_fig",t.target.value)}}}),e._v(" "),e.verrors.has("closeticket.current_production_fig")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(e._s(e.verrors.first("closeticket.current_production_fig")))]):e._e()])]):e._e(),e._v(" "),"Breakdown Maintenance"==e.formclose.ticket_type?a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Production Loss")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formclose.production_loss,expression:"formclose.production_loss"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.production_loss")},attrs:{name:"production_loss","data-vv-as":"Production Loss"},domProps:{value:e.formclose.production_loss},on:{input:function(t){t.target.composing||e.$set(e.formclose,"production_loss",t.target.value)}}}),e._v(" "),e.verrors.has("closeticket.production_loss")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                                        "+e._s(e.verrors.first("closeticket.production_loss")))]):e._e()])]):e._e(),e._v(" "),"Breakdown Maintenance"==e.formclose.ticket_type?a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Production loss amount")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formclose.production_loss_amount,expression:"formclose.production_loss_amount"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.production_loss_amount")},attrs:{name:"production_loss_amount","data-vv-as":"Current Production fig"},domProps:{value:e.formclose.production_loss_amount},on:{input:function(t){t.target.composing||e.$set(e.formclose,"production_loss_amount",t.target.value)}}}),e._v(" "),e.verrors.has("closeticket.production_loss_amount")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(e._s(e.verrors.first("closeticket.production_loss_amount")))]):e._e()])]):e._e()])]),e._v(" "),e._m(3)])])])])])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Ticket No ")]),e._v(" "),a("th",[e._v("Machine Name")]),e._v(" "),a("th",[e._v("Machine Far No")]),e._v(" "),a("th",[e._v("Created Date")]),e._v(" "),a("th",[e._v("Likely Date")]),e._v(" "),a("th",[e._v("Ticket Status")]),e._v(" "),a("th",[e._v("Action")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[this._v("Close Ticket")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Close")]),this._v(" "),t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Close Ticket")])])}],!1,null,null,null);t.default=r.exports}}]);
//# sourceMappingURL=8.bundle.08ca34de58fb8c55bd6b.js.map