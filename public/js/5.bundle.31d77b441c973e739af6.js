(window.webpackJsonp=window.webpackJsonp||[]).push([[5,17],{"9Qda":function(e,t,a){var s=a("TvOq");s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,a("SZ7m").default)("f79a1f5a",s,!0,{})},I0oB:function(e,t,a){"use strict";a.r(t);var s=a("sooR"),i=a("JFUb");var o=function(e){a("9Qda")},r=Object(i.a)(s.a,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"content"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[e._v("Ticket List")]),e._v(" "),a("div",{staticClass:"card-tools"},[a("router-link",{staticClass:"btn btn-sm btn-primary",attrs:{to:"/ticket/add"},on:{click:e.newModal}},[a("i",{staticClass:"fa fa-plus-square"}),e._v("\n                  Add New\n                ")])],1)]),e._v(" "),a("div",{staticClass:"card-body p-2"},[a("form",{attrs:{autocomplete:"off","data-vv-scope":"searchfr"},on:{submit:function(t){return t.preventDefault(),e.getResults()}}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"col"},[a("v-select",{attrs:{label:"name","get-option-label":e.getLabel,reduce:function(e){return e.id},options:e.search_machines,placeholder:"Enter machines ...",name:"machine_id"},model:{value:e.search.machine_id,callback:function(t){e.$set(e.search,"machine_id",t)},expression:"search.machine_id"}})],1),e._v(" "),a("div",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search.ticket,expression:"search.ticket"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter ticket ...",name:"ticket"},domProps:{value:e.search.ticket},on:{input:function(t){t.target.composing||e.$set(e.search,"ticket",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"col"},[a("v-select",{attrs:{label:"site_name",reduce:function(e){return e.id},options:e.search_sites,placeholder:"Select Site...",name:"site_id"},model:{value:e.search.site_id,callback:function(t){e.$set(e.search,"site_id",t)},expression:"search.site_id"}})],1),e._v(" "),a("div",{staticClass:"col"},[a("v-select",{attrs:{label:"site_name",options:["Open","Closed"],placeholder:"Select Status...",name:"status"},model:{value:e.search.status,callback:function(t){e.$set(e.search,"status",t)},expression:"search.status"}})],1),e._v(" "),a("div",{staticClass:"col"},[a("v-select",{attrs:{label:"site_name",options:["Major","Minor"],placeholder:"Select Complaint Nature...",name:"complaint_nature"},model:{value:e.search.complaint_nature,callback:function(t){e.$set(e.search,"complaint_nature",t)},expression:"search.complaint_nature"}})],1),e._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[e._v("Search")]),e._v(" "),a("button",{staticClass:"btn btn-info ml-2",attrs:{type:"button"},on:{click:function(t){return e.reset_filter()}}},[e._v("Reset")]),e._v(" "),a("download-excel",{staticClass:"btn btn-warning ml-2",attrs:{fetch:e.export_csv,fields:e.json_fields,"before-generate":e.startDownload,"before-finish":e.finishDownload,worksheet:"My Worksheet",type:"csv",name:"ticket_list.csv"}},[a("span",{staticClass:"labelText"},[a("i",{staticClass:"fa fa-file-excel-o",attrs:{"aria-hidden":"true"}}),e._v("\n                      Export as CSV")])])],1)])]),e._v(" "),a("div",{staticClass:"card-body ticketLstTbl table-responsive p-0"},[a("table",{staticClass:"table table-hover"},[e._m(0),e._v(" "),a("tbody",e._l(e.Tickets.data,(function(t,s){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.ticket_no))]),e._v(" "),a("td",{staticClass:"text-capitalize"},[e._v(e._s(t.machine.name))]),e._v(" "),a("td",[t.problem_description?[a("VueReadMoreSmooth",{attrs:{open:e.problemsMore[s],"no-button":"","no-shadow":""},on:{"update:open":function(t){return e.$set(e.problemsMore,s,t)}}},[a("p",[e._v(e._s(t.problem_description))])]),e._v(" "),a("span",{staticClass:"rmore",on:{click:function(t){return e.sclick(s,"p")}}},[e._v("..."+e._s(e.problemsMore[s]?"Less":"More"))])]:e._e()],2),e._v(" "),a("td",[t.problems&&t.problems.length>0?[a("VueReadMoreSmooth",{attrs:{open:e.additionalMore[s],"no-button":"","no-shadow":""},on:{"update:open":function(t){return e.$set(e.additionalMore,s,t)}}},e._l(t.problems,(function(s,i){return t.problems?a("p",{key:"p"+i,domProps:{innerHTML:e._s(s.problem)}}):e._e()})),0),e._v(" "),a("span",{staticClass:"rmore",on:{click:function(t){return e.sclick(s)}}},[e._v("..."+e._s(e.additionalMore[s]?"Less":"More"))])]:e._e()],2),e._v(" "),a("td",[e._v("\n                      "+e._s(t.machine.far_no+" - "+t.machine.name+" - "+(t.machine.machine_model?t.machine.machine_model.name:"null")+" - "+t.machine.machine_sr_no)+"\n                    ")]),e._v(" "),a("td",[e._v(e._s(t.site?t.site.site_name:"-"))]),e._v(" "),a("td",[e._v(e._s(t.complaint_nature))]),e._v(" "),a("td",[e._v(e._s(t.created_by_name))]),e._v(" "),a("td",[e._v(e._s(e._f("myDate")(t.created_at)))]),e._v(" "),a("td",[e._v(e._s(e._f("myDate")(t.likely_date)))]),e._v(" "),a("td",[e._v(e._s(e._f("myDate")(t.reversion_date)))]),e._v(" "),a("td",[e._v("\n                      "+e._s("created by user"==t.status.toLowerCase()?"Open":t.status)+"\n                    ")]),e._v(" "),a("td",[a("a",{staticClass:"btn btn-warning btn-sm",attrs:{href:"javascript:void(0);"},on:{click:function(a){return e.viewModal(t)}}},[e._v("\n                        View\n                      ")]),e._v(" "),"Closed"!=t.status&&e.$gate.isAdmin()?a("router-link",{staticClass:"btn btn-success btn-sm",attrs:{to:"/ticket/edit/"+t.id}},[e._v("Edit")]):e._e(),e._v(" "),"Closed"!=t.status&&e.$gate.isAdmin()?a("a",{staticClass:"btn btn-danger btn-sm",attrs:{href:"javascript:void(0);",title:"Close ticket"},on:{click:function(a){return e.closeModal(t)}}},[e._v("\n                        Close\n                      ")]):e._e()],1)])})),0)])]),e._v(" "),a("div",{staticClass:"card-footer"},[a("pagination",{attrs:{data:e.Tickets},on:{"pagination-change-page":e.getResults}})],1)])])])]),e._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"closemodal",tabindex:"-1",role:"dialog","aria-labelledby":"closemodal","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[e._m(1),e._v(" "),a("form",{attrs:{"data-vv-scope":"closeticket"},on:{submit:function(t){return t.preventDefault(),e.submitCloseTicket()}}},[a("div",{staticClass:"modal-body"},[e.pop_machine?a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm"},[a("p",[a("strong",[e._v("Far No :")]),e._v(" "+e._s(e.pop_machine.far_no)+"\n                    "),a("br"),e._v(" "),a("strong",[e._v("Machine Name :")]),e._v(" "+e._s(e.pop_machine.name)+"\n                    "),a("br"),e._v(" "),a("strong",[e._v("Machine Model :")]),e._v("\n                    "+e._s(e.pop_machine.machine_model?e.pop_machine.machine_model.name:"-")+"\n                    "),a("br"),e._v(" "),a("strong",[e._v("Machine Chassis No :")]),e._v("\n                    "+e._s(e.pop_machine.chassis_no)+"\n                  ")])]),e._v(" "),a("div",{staticClass:"col-sm"},[a("p",[a("strong",[e._v("Machine Sl No:")]),e._v("\n                    "+e._s(e.pop_machine.machine_sr_no)+"\n                    "),a("br"),e._v(" "),a("strong",[e._v("Machine Regn No :")]),e._v(" "+e._s(e.pop_machine.regn_no)+"\n                    "),a("br"),e._v(" "),a("strong",[e._v("Machine Engine No :")]),e._v("\n                    "+e._s(e.pop_machine.engine_no)+"\n                    "),a("br"),e._v(" "),a("strong",[e._v("Ticket No :")]),e._v(" "+e._s(e.pop_ticket?e.pop_ticket.ticket_no:"-")+"\n                  ")])])]):e._e(),e._v(" "),a("div",{staticClass:"row"},[e._v("\n                "+e._s(e.verrors.closeticket)+"\n                "),e.pop_ticket&&e.pop_ticket.likely_date?a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Actual Date")]),e._v(" "),a("datetime",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":e.verrors.has("closeticket.actual_date")},attrs:{"value-zone":"Asia/Kolkata",name:"actual_date","input-class":"form-control","data-vv-as":"Actual Date","min-datetime":new Date(e.pop_ticket.created_at).toISOString(),"max-datetime":(new Date).toISOString()},model:{value:e.formclose.actual_date,callback:function(t){e.$set(e.formclose,"actual_date",t)},expression:"formclose.actual_date"}}),e._v(" "),e.verrors.has("closeticket.actual_date")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                      "+e._s(e.verrors.first("closeticket.actual_date"))+"\n                    ")]):e._e()],1)]):e._e(),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Machine Status")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.formclose.machine_status,expression:"formclose.machine_status"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.machine_status")},attrs:{name:"machine_status","data-vv-as":"machine status"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.formclose,"machine_status",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"Running"}},[e._v("Running")]),e._v(" "),a("option",{attrs:{value:"Running with Problem"}},[e._v("\n                        Running with Problem\n                      ")]),e._v(" "),a("option",{attrs:{value:"Non Repairable"}},[e._v("Non Repairable")])]),e._v(" "),e.verrors.has("closeticket.machine_status")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                      "+e._s(e.verrors.first("closeticket.machine_status"))+"\n                    ")]):e._e()])]),e._v(" "),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Estimated Material cost")]),e._v(" "),a("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.pop_ticket.estimated_material_cost+e.pop_ticket.ad_estimated_material_cost+"("+e.pop_ticket.estimated_material_cost+"+"+e.pop_ticket.ad_estimated_material_cost+")"}})])]),e._v(" "),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Actual Material cost")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formclose.actual_material_cost,expression:"formclose.actual_material_cost"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.actual_material_cost")},attrs:{type:"text",name:"actual_material_cost","data-vv-as":"Actual Material cost",readonly:"Non Repairable"==e.formclose.machine_status},domProps:{value:e.formclose.actual_material_cost},on:{input:function(t){t.target.composing||e.$set(e.formclose,"actual_material_cost",t.target.value)}}}),e._v(" "),e.verrors.has("closeticket.actual_material_cost")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                      "+e._s(e.verrors.first("closeticket.actual_material_cost"))+"\n                    ")]):e._e()])]),e._v(" "),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" Actual Material cost File")]),e._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],ref:"fileactualmaterial",staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.material_cost")},attrs:{type:"file",multiple:"",name:"material_cost","data-vv-as":"Actual Material cost"},on:{change:e.uploadMaterialCost}}),e._v(" "),e.pop_ticket.actual_estimated_material_files?a("div",{staticClass:"clearfix"},e._l(e.pop_ticket.actual_estimated_material_files,(function(t,s){return a("a",{key:t.id,attrs:{href:t.file,target:"_blank"}},[e._v("View\n                        "+e._s(e.pop_ticket.actual_estimated_material_files.length>1?s+1:""))])})),0):e._e(),e._v(" "),e.verrors.has("closeticket.material_cost")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                      "+e._s(e.verrors.first("closeticket.material_cost"))+"\n                    ")]):e._e()])]),e._v(" "),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Estimated Service cost")]),e._v(" "),a("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.pop_ticket.estimated_service_cost+e.pop_ticket.ad_estimated_service_cost+"("+e.pop_ticket.estimated_service_cost+"+"+e.pop_ticket.ad_estimated_service_cost+")"}})])]),e._v(" "),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Actual Service cost")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formclose.actual_service_cost,expression:"formclose.actual_service_cost"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.actual_service_cost")},attrs:{type:"text",name:"actual_service_cost","data-vv-as":"Actual Service cost",readonly:"Non Repairable"==e.formclose.machine_status},domProps:{value:e.formclose.actual_service_cost},on:{input:function(t){t.target.composing||e.$set(e.formclose,"actual_service_cost",t.target.value)}}}),e._v(" "),e.verrors.has("closeticket.actual_service_cost")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                      "+e._s(e.verrors.first("closeticket.actual_service_cost"))+"\n                    ")]):e._e()])]),e._v(" "),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" Actual Service cost File ")]),e._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],ref:"fileactualservice",staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.service_cost")},attrs:{type:"file",multiple:"",name:"service_cost","data-vv-as":"Actual Service cost"},on:{change:e.uploadServiceCost}}),e._v(" "),e.pop_ticket.actual_estimated_service_files?a("div",{staticClass:"clearfix"},e._l(e.pop_ticket.actual_estimated_service_files,(function(t,s){return a("a",{key:t.id,attrs:{href:t.file,target:"_blank"}},[e._v("View\n                        "+e._s(e.pop_ticket.actual_estimated_service_files.length>1?s+1:""))])})),0):e._e(),e._v(" "),e.verrors.has("closeticket.service_cost")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                      "+e._s(e.verrors.first("closeticket.service_cost"))+"\n                    ")]):e._e()])]),e._v(" "),e.pop_machine.is_consumtion_hr_run?a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Current Run hour ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formclose.current_run_hour,expression:"formclose.current_run_hour"},{name:"validate",rawName:"v-validate",value:{required:!0,decimal:2,min_value:e.pop_machine.last_maintenances?e.pop_machine.last_maintenances.run_hour:e.pop_machine.last_hr_run},expression:"{\n                        required: true,\n                        decimal: 2,\n                        min_value: pop_machine.last_maintenances\n                          ? pop_machine.last_maintenances.run_hour\n                          : pop_machine.last_hr_run,\n                      }"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.current_run_hour")},attrs:{name:"current_run_hour","data-vv-as":"Current Run hour"},domProps:{value:e.formclose.current_run_hour},on:{input:function(t){t.target.composing||e.$set(e.formclose,"current_run_hour",t.target.value)}}}),e._v(" "),e.verrors.has("closeticket.current_run_hour")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                      "+e._s(e.verrors.first("closeticket.current_run_hour"))+"\n                    ")]):e._e()])]):e._e(),e._v(" "),e.pop_machine.is_consumtion_km_run?a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" Current KM Run ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formclose.current_km_run,expression:"formclose.current_km_run"},{name:"validate",rawName:"v-validate",value:{required:!0,decimal:2,min_value:e.pop_machine.last_maintenances?e.pop_machine.last_maintenances.km_run:e.pop_machine.last_km_run},expression:"{\n                        required: true,\n                        decimal: 2,\n                        min_value: pop_machine.last_maintenances\n                          ? pop_machine.last_maintenances.km_run\n                          : pop_machine.last_km_run,\n                      }"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.current_km_run")},attrs:{name:"current_km_run","data-vv-as":"Current KM hour"},domProps:{value:e.formclose.current_km_run},on:{input:function(t){t.target.composing||e.$set(e.formclose,"current_km_run",t.target.value)}}}),e._v(" "),e.verrors.has("closeticket.current_km_run")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                      "+e._s(e.verrors.first("closeticket.current_km_run"))+"\n                    ")]):e._e()])]):e._e(),e._v(" "),e.pop_machine.is_production_fig?a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" Current Production fig ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formclose.current_production_fig,expression:"formclose.current_production_fig"},{name:"validate",rawName:"v-validate",value:{required:!0,decimal:2,min_value:e.pop_machine.last_maintenances?e.pop_machine.last_maintenances.production_fig:e.pop_machine.periodic_maintenance_breakdown},expression:"{\n                        required: true,\n                        decimal: 2,\n                        min_value: pop_machine.last_maintenances\n                          ? pop_machine.last_maintenances.production_fig\n                          : pop_machine.periodic_maintenance_breakdown,\n                      }"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.current_production_fig")},attrs:{name:"current_production_fig","data-vv-as":"Current Production fig"},domProps:{value:e.formclose.current_production_fig},on:{input:function(t){t.target.composing||e.$set(e.formclose,"current_production_fig",t.target.value)}}}),e._v(" "),e.verrors.has("closeticket.current_production_fig")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                      "+e._s(e.verrors.first("closeticket.current_production_fig"))+"\n                    ")]):e._e()])]):e._e(),e._v(" "),"Breakdown Maintenance"==e.formclose.ticket_type?a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Production Loss")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formclose.production_loss,expression:"formclose.production_loss"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.production_loss")},attrs:{name:"production_loss","data-vv-as":"Production Loss"},domProps:{value:e.formclose.production_loss},on:{input:function(t){t.target.composing||e.$set(e.formclose,"production_loss",t.target.value)}}}),e._v(" "),e.verrors.has("closeticket.production_loss")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                      "+e._s(e.verrors.first("closeticket.production_loss"))+"\n                    ")]):e._e()])]):e._e(),e._v(" "),"Breakdown Maintenance"==e.formclose.ticket_type?a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Production loss amount")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formclose.production_loss_amount,expression:"formclose.production_loss_amount"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.production_loss_amount")},attrs:{name:"production_loss_amount","data-vv-as":"Current Production fig"},domProps:{value:e.formclose.production_loss_amount},on:{input:function(t){t.target.composing||e.$set(e.formclose,"production_loss_amount",t.target.value)}}}),e._v(" "),e.verrors.has("closeticket.production_loss_amount")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                      "+e._s(e.verrors.first("closeticket.production_loss_amount"))+"\n                    ")]):e._e()])]):e._e(),e._v(" "),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Root Cause Analysis")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formclose.rca,expression:"formclose.rca"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("closeticket.rca")},attrs:{rows:"1",name:"rca"},domProps:{value:e.formclose.rca},on:{input:function(t){t.target.composing||e.$set(e.formclose,"rca",t.target.value)}}}),e._v(" "),e.verrors.has("closeticket.rca")?a("div",{staticClass:"help-block invalid-feedback"},[e._v("\n                      "+e._s(e.verrors.first("closeticket.rca"))+"\n                    ")]):e._e()])])])]),e._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[e._v("\n                Close\n              ")]),e._v(" "),e.close_btn?a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("\n                Close Ticket\n              ")]):a("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[e._v("\n                Processing\n              ")])])])])])]),e._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"viewmodal",tabindex:"-1",role:"dialog","aria-labelledby":"viewmodal","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[e._m(2),e._v(" "),e.pop_ticket?a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 bs"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Machine Site")]),e._v(" "),a("v-select",{attrs:{label:"site_name",reduce:function(e){return e.id},options:e.sites,placeholder:"Choose Site ...",disabled:""},model:{value:e.pop_ticket.site_id,callback:function(t){e.$set(e.pop_ticket,"site_id",t)},expression:"pop_ticket.site_id"}})],1)]),e._v(" "),a("div",{staticClass:"col-4 bs"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Machine Category")]),e._v(" "),a("v-select",{attrs:{label:"name",reduce:function(e){return e.id},options:e.categories,placeholder:"Choose Category ...",disabled:""},model:{value:e.pop_ticket.category_id,callback:function(t){e.$set(e.pop_ticket,"category_id",t)},expression:"pop_ticket.category_id"}})],1)]),e._v(" "),a("div",{staticClass:"col-4 bs"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Machine Description")]),e._v(" "),a("v-select",{attrs:{label:"name",reduce:function(e){return e.id},options:e.sub_categories,placeholder:"Choose description ...",name:"sub_category_id",disabled:""!=e.pop_ticket.id},model:{value:e.pop_ticket.sub_category_id,callback:function(t){e.$set(e.pop_ticket,"sub_category_id",t)},expression:"pop_ticket.sub_category_id"}})],1)]),e._v(" "),a("div",{staticClass:"col-4 bs"},[a("div",{staticClass:"form-group"},[a("label",{staticStyle:{margin:"0"}},[e._v(" Machine : ")]),e._v(" "),a("strong",[e._v("Far No :")]),e._v(" "+e._s(e.pop_ticket.machine.far_no)+"\n                  "),a("br"),e._v(" "),a("strong",[e._v("Machine Name :")]),e._v(" "+e._s(e.pop_ticket.machine.name)+"\n                  "),a("br"),e._v(" "),a("strong",[e._v("Machine Chassis No :")]),e._v("\n                  "+e._s(e.pop_ticket.machine.chassis_no)+"\n                  "),a("br"),e._v(" "),a("strong",[e._v("Machine Sl No:")]),e._v("\n                  "+e._s(e.pop_ticket.machine.machine_sr_no)+"\n                  "),a("br"),e._v(" "),a("strong",[e._v("Machine Regn No :")]),e._v("\n                  "+e._s(e.pop_ticket.machine.regn_no)+"\n                  "),a("br"),e._v(" "),a("strong",[e._v("Machine Engine No :")]),e._v("\n                  "+e._s(e.pop_ticket.machine.engine_no)+"\n                ")])]),e._v(" "),a("div",{staticClass:"col-4 bs"},["vendor"==e.pop_ticket.maintenance_provider&&e.pop_ticket.service_type?a("div",{staticClass:"form-group mb-0"},[a("label",[e._v("Service Type")]),e._v("\n                  "+e._s(e.pop_ticket.service_type)+"\n                ")]):e._e(),e._v(" "),"Free Service"==e.pop_ticket.service_type&&e.pop_ticket.free_service_no?a("div",{staticClass:"form-group mb-0"},[a("label",[e._v("Free service no:")]),e._v("\n                  "+e._s(e.pop_ticket.free_service_no)+"/"+e._s(e.pop_ticket.machine.free_service_no)+"\n                ")]):e._e(),e._v(" "),e.pop_ticket.ticket_type?a("div",{staticClass:"form-group mb-0"},[a("label",[e._v("Ticket Type")]),e._v("\n                  "+e._s(e.pop_ticket.ticket_type)+"\n                ")]):e._e(),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticStyle:{margin:"0"}},[e._v("Machine's Problem: ")]),e._v("\n                  "+e._s(e.pop_ticket.problem_description)+"\n                ")])]),e._v(" "),a("div",{staticClass:"col-4 bs"},[a("div",{staticClass:"form-group mb-0"},[a("label",[e._v("Maintenance Provider")]),e._v("\n                  "+e._s(e.pop_ticket.maintenance_provider)+"\n                ")]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",[e._v("\n                    "+e._s("user"==e.pop_ticket.maintenance_provider?"User":"Vendor")+"\n                  ")]),e._v(" "),"vendor"==e.pop_ticket.maintenance_provider?[e._v("\n                    :\n                    "),e._l(e.pop_ticket.all_vendors,(function(t,s){return a("span",{key:"vm"+s,staticClass:"comma"},[e._v(e._s(t.name))])})),e._v(" "),a("span",{staticClass:"comma"})]:[a("v-select",{attrs:{label:"name",reduce:function(e){return e.id},options:e.users,placeholder:"Enter users ...",disabled:""},model:{value:e.pop_ticket.user_id,callback:function(t){e.$set(e.pop_ticket,"user_id",t)},expression:"pop_ticket.user_id"}})]],2)]),e._v(" "),e.pop_ticket.stages?a("div",{staticClass:"col-8 bs"},[a("label",{staticStyle:{margin:"0px"}},[e._v("Stages")]),e._v(" "),e._l(e.pop_ticket.stages,(function(t,s){return[a("div",{key:"s"+s,staticClass:"row",staticStyle:{border:"0","padding-bottom":"8px"}},[a("div",{staticClass:"col-4"},[e._v("\n                      "+e._s(t.stage_no)+"\n                    ")]),e._v(" "),a("div",{staticClass:"col-2"},[e._v("\n                      "+e._s(e._f("myDate")(t.stage_date))+"\n                    ")]),e._v(" "),a("div",{staticClass:"col-5"},[e._v("\n                      "+e._s(t.description)+"\n                    ")])])]}))],2):e._e(),e._v(" "),a("div",{staticClass:"col-4 bs"},[a("div",{staticClass:"form-group"},[a("label",{staticStyle:{margin:"0"}},[e._v("Machine's Additional Problem: ")]),a("br"),e._v(" "),e._l(e.pop_ticket.problems,(function(t,s){return e.pop_ticket.problems?a("p",{key:"pa"+s,domProps:{innerHTML:e._s(t.problem)}}):e._e()}))],2)]),e._v(" "),a("div",{staticClass:"col-3 bs"},[a("div",{staticClass:"form-group"},[a("label",{staticStyle:{margin:"0"}},[e._v("Estimated Material cost")]),a("br"),e._v("\n                  "+e._s(e._f("toCurrency")(e.pop_ticket.estimated_material_cost+e.pop_ticket.ad_estimated_material_cost))+"\n                  ("+e._s(e.pop_ticket.estimated_material_cost+"+"+e.pop_ticket.ad_estimated_material_cost)+")\n                  "),a("p",e._l(e.pop_ticket.estimated_material_files,(function(t,s){return a("a",{key:t.id,staticClass:"btn btn-success mr-2",attrs:{href:t.file,target:"_blank"}},[e._v("View\n                      "+e._s(e.pop_ticket.estimated_material_files.length>1?s+1:""))])})),0)])]),e._v(" "),a("div",{staticClass:"col-3 bs"},[a("div",{staticClass:"form-group"},[a("label",{staticStyle:{margin:"0"}},[e._v("Estimated Service cost : ")]),a("br"),e._v("\n                  "+e._s(e._f("toCurrency")(e.pop_ticket.estimated_service_cost+e.pop_ticket.ad_estimated_service_cost))+"\n                  ("+e._s(e.pop_ticket.estimated_service_cost+"+"+e.pop_ticket.ad_estimated_service_cost)+")\n                  "),a("p",e._l(e.pop_ticket.estimated_service_files,(function(t,s){return a("a",{key:t.id,staticClass:"btn btn-success mr-2",attrs:{href:t.file,target:"_blank"}},[e._v("View\n                      "+e._s(e.pop_ticket.estimated_service_files.length>1?s+1:""))])})),0)])]),e._v(" "),a("div",{staticClass:"col-3 bs"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Actual Material Cost : ")]),e._v(" "),e.pop_ticket.actual_material_cost?a("span",[e._v("\n                    "+e._s(e._f("toCurrency")(e.pop_ticket.actual_material_cost)))]):e._e(),e._v(" "),a("p",e._l(e.pop_ticket.actual_estimated_material_files,(function(t,s){return a("a",{key:t.id,staticClass:"btn btn-success mr-2",attrs:{href:t.file,target:"_blank"}},[e._v("View\n                      "+e._s(e.pop_ticket.actual_estimated_material_files.length>1?s+1:""))])})),0)])]),e._v(" "),a("div",{staticClass:"col-3 bs"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Actual Service Cost : ")]),e._v(" "),e.pop_ticket.actual_service_cost?a("span",[e._v(e._s(e._f("toCurrency")(e.pop_ticket.actual_service_cost)))]):e._e(),e._v(" "),a("p",e._l(e.pop_ticket.actual_estimated_service_files,(function(t,s){return a("a",{key:t.id,staticClass:"btn btn-success mr-2",attrs:{href:t.file,target:"_blank"}},[e._v("View\n                      "+e._s(e.pop_ticket.actual_estimated_service_files.length>1?s+1:""))])})),0)])]),e._v(" "),a("div",{staticClass:"col-4 bs"},[a("div",{staticClass:"form-group"},[a("label",{staticStyle:{margin:"0"}},[e._v("Ticket No : ")]),e._v("\n                  "+e._s(e.pop_ticket.ticket_no)+"\n                ")])]),e._v(" "),a("div",{staticClass:"col-4 bs"},[a("div",{staticClass:"form-group"},[a("label",{staticStyle:{margin:"0"}},[e._v("Likely Date : ")]),e._v("\n                  "+e._s(e._f("myDate")(e.pop_ticket.likely_date))+"\n                ")])]),e._v(" "),a("div",{staticClass:"col-4 bs"},[a("div",{staticClass:"form-group"},[a("label",{staticStyle:{margin:"0"}},[e._v("Actual Date : ")]),e._v("\n                  "+e._s(e._f("myDate")(e.pop_ticket.actual_date))+"\n                ")])]),e._v(" "),e.pop_ticket.current_run_hour?a("div",{staticClass:"col-4 bs"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Current Run Hour : ")]),e._v("\n                  "+e._s(e.pop_ticket.current_run_hour)+"\n                ")])]):e._e(),e._v(" "),e.pop_ticket.current_km_run?a("div",{staticClass:"col-4 bs"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Current KM Hour : ")]),e._v("\n                  "+e._s(e.pop_ticket.current_km_run)+"\n                ")])]):e._e(),e._v(" "),e.pop_ticket.current_production_fig?a("div",{staticClass:"col-4 bs"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Current Production Fig : ")]),e._v("\n                  "+e._s(e.pop_ticket.current_production_fig)+"\n                ")])]):e._e(),e._v(" "),e.pop_ticket.production_loss?a("div",{staticClass:"col-4 bs"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Production Loss : ")]),e._v("\n                  "+e._s(e.pop_ticket.production_loss)+"\n                ")])]):e._e(),e._v(" "),e.pop_ticket.production_loss_amount?a("div",{staticClass:"col-4 bs"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Production Loss Amount : ")]),e._v("\n                  "+e._s(e._f("toCurrency")(e.pop_ticket.production_loss_amount))+"\n                ")])]):e._e()])]):e._e()])])])])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Ticket No")]),e._v(" "),a("th",[e._v("Machine Name")]),e._v(" "),a("th",[e._v("Machine's Problem")]),e._v(" "),a("th",[e._v("Additional Problems")]),e._v(" "),a("th",[e._v("Machine Far No & Details")]),e._v(" "),a("th",[e._v("Site")]),e._v(" "),a("th",[e._v("Complaint Nature")]),e._v(" "),a("th",[e._v("Created By")]),e._v(" "),a("th",[e._v("Created Date")]),e._v(" "),a("th",[e._v("Expected date")]),e._v(" "),a("th",[e._v("Reversion"),a("br"),e._v("Expected date")]),e._v(" "),a("th",[e._v("Ticket Status")]),e._v(" "),a("th",[e._v("Action")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[this._v("Close Ticket")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[this._v("View Ticket")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}],!1,o,null,null);t.default=r.exports},TvOq:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,'\n.bs {\n  border: 1px solid #d2d1d1a8;\n  border-radius: 5px;\n}\n.comma ~ .comma:not(:empty):before {\n  content: ", ";\n}\n.rmore {\n  color: blue;\n}\n',""])},sooR:function(e,t,a){"use strict";(function(e){var s=a("xt5z"),i=a.n(s);t.a={components:{VueReadMoreSmooth:i()},data:()=>({close_btn:!0,additionalMore:[],problemsMore:[],search_machines:[],search_sites:[],search:{page:1,machine_id:"",site_id:"",complaint_nature:"",ticket:""},popticket:{},categories:[],sub_categories:[],sites:[],selected_machine:"",users:[],machines:[],Tickets:{},editmode:!1,MaterialCost:null,ServiceCost:null,form:new Form({id:"",site_id:"",category_id:"",sub_category_id:"",free_service_no:"",ticket_type:"Periodic Maintenance",service_type:"Paid Service",machine_id:"",ticket_no:"",vendor_id:"",user_id:"",likely_date:"",estimated_material_cost:"",estimated_service_cost:"",maintenance_provider:"vendor",problem_description:"",complaint_nature:"Major"}),stages:[{id:"",stage_no:"",stage_date:"",description:"",file:"",new_file:""}],formclose:new Form({id:"",machine_status:"",edit_type:"closeticket",ticket_type:"Periodic Maintenance",actual_date:"",actual_material_cost:"",actual_service_cost:"",current_run_hour:"",current_km_run:"",current_production_fig:"",production_loss:"",production_loss_amount:"",status:"Closed",vendor_resolve_date:"",vendor_attain_date:"",vendor_response_date:"",vendor_call_date:"",rca:""}),pop_machine:"",pop_ticket:"",opn_stage:["Vendor created","Vendor Assigned","Order issued","Payment under process","Payment Done","Logistics under process","Materials despatched","Material received at site","Maintainace under progress"],last_stage_index:0,last_stage_date:"",json_fields:{"Ticket No":"ticket_no","Ticket Type":"ticket_type",Machine:{field:"machine",callback:e=>e.name+" - "+e.far_no},"Likely Date":"likely_date","Reversion Date":"reversion_date","Reversion Reason":"reversion_reason","Estimated Material Cost":"estimated_material_cost","Estimated Service Cost":"estimated_service_cost","Actual Date":"actual_date","Actual Material Cost":"actual_material_cost","Actual Service Cost":"actual_service_cost",Status:"status","Service Type":"service_type","Maintenance Provider":"maintenance_provider","Problem Description":"problem_description","Complaint Nature":"complaint_nature","Status During Complaint":"status_during_complaint"},json_meta:[[{key:"charset",value:"utf-8"}]]}),methods:{async reset_filter(){this.search={page:1,machine_id:"",site_id:"",complaint_nature:"",ticket:""}},async export_csv(){return(await axios.get("api/ticket?export=1",{params:{search:this.search}})).data.data},startDownload(){Swal.fire({title:"Please Wait !",html:"Data populating",allowOutsideClick:!1,onBeforeOpen:()=>{Swal.showLoading()}})},finishDownload(){Swal.close()},sclick(e,t=""){if(t){let t=!this.problemsMore[e];this.$set(this.problemsMore,e,t)}else{let t=!this.additionalMore[e];this.$set(this.additionalMore,e,t)}},getLabel:e=>"object"==typeof e?e.far_no+" - "+e.name:e,viewModal(t){this.pop_ticket="",axios.get("api/ticket/"+t.id).then(e=>{this.pop_ticket=e.data.data}).catch(e=>{this.pop_ticket=t}),axios.get("api/category/"+t.category_id).then(e=>{this.sub_categories=e.data.data}),e("#viewmodal").modal("show")},AddStage(){this.stages.push({id:"",stage_no:"",stage_date:"",description:"",file:"",new_file:""})},async choose_stage_file(e,t){this.stages[t].new_file=e.target.files[0]},async uploadMaterialCost(e){this.MaterialCost=e.target.files},async uploadServiceCost(e){this.ServiceCost=e.target.files},getResults(e=1){this.$Progress.start(),this.search.page=e,axios.get("/api/ticket",{params:this.search}).then(e=>{this.Tickets=e.data.data,this.additionalMore=new Array(this.Tickets.data.length).fill(!1),this.problemsMore=new Array(this.Tickets.data.length).fill(!1)}),this.$Progress.finish()},submitCloseTicket(){this.$forceUpdate(),this.$validator.validateAll("closeticket").then(async t=>{if(t){let t=this.$loading.show({}),a=this.pop_machine.last_maintenances?this.pop_machine.last_maintenances.datetime:this.pop_machine.last_maintenance_date;a&&this.formclose.actual_date&&Date.parse(moment(this.formclose.actual_date).format("MMM,DD YYYY"))<Date.parse(moment(a).format("MMM,DD YYYY"))?(t.hide(),Swal.fire("You can not add previous date's data, Please remove record from maintenance list.","","warning")):(this.close_btn=!1,this.formclose.put("/api/ticket/"+this.formclose.id).then(a=>{a.data.success&&(e("#closemodal").modal("hide"),Toast.fire({icon:"success",title:a.data.message}),this.upload_files(this.formclose.id,"actual"),this.$validator.reset(),this.formclose.reset(),this.loadTickets()),this.close_btn=!0,t.hide()}).catch(()=>{this.close_btn=!0,t.hide(),void 0!==err.response.data&&this.$setErrorsFromResponse(err.response.data)}))}})},closeModal(t){this.$validator.pause(),e("#closemodal").modal("show"),this.$validator.reset(),this.formclose.reset(),this.$refs.fileactualservice.value=null,this.$refs.fileactualmaterial.value=null,this.pop_ticket=t,this.pop_machine=t.machine,this.formclose.fill(t),this.formclose.edit_type="closeticket",this.$validator.resume()},editModal(t){this.editmode=!0,this.$validator.pause(),this.form.reset(),this.pop_ticket=t,this.$gate.isAdmin()&&(this.$refs.fileservice.value=null,this.$refs.filematerial.value=null),this.MaterialCost=null,this.ServiceCost=null,e("#addNew").modal("show"),this.form.fill(t),this.form.likely_date=t.likely_date?new Date(t.likely_date).toISOString():"",this.stages=[],t.stages&&t.stages.length>0&&(this.stages=t.stages),this.$validator.resume()},newModal(){this.stages=[],this.AddStage(),this.editmode=!1,this.$validator.reset(),this.$validator.pause(),this.form.reset(),this.$gate.isAdmin()&&(this.$refs.fileservice.value=null,this.$refs.filematerial.value=null),this.MaterialCost=null,this.ServiceCost=null,e("#addNew").modal("show"),this.$validator.resume()},loadTickets(){let e=this.$loading.show({});axios.get("/api/ticket",{params:this.search}).then(t=>{this.Tickets=t.data.data,this.additionalMore=new Array(this.Tickets.data.length).fill(!1),this.problemsMore=new Array(this.Tickets.data.length).fill(!1),e.hide()}).catch(()=>{e.hide()})},async upload_files(e,t=!1){this.MaterialCost&&this.MaterialCost.forEach(a=>{var s=new FormData;s.append("file",a),t?s.append("file_type","Actual Estimated Material"):s.append("file_type","Estimated Material"),s.append("ticket_id",e),axios.post("api/ticket/files",s).then(e=>{console.log("gallery uploaded")})}),this.ServiceCost&&this.ServiceCost.forEach(a=>{var s=new FormData;s.append("file",a),t?s.append("file_type","Actual Estimated Service"):s.append("file_type","Estimated Service"),s.append("ticket_id",e),axios.post("api/ticket/files",s).then(e=>{console.log("gallery uploaded")})})},async upload_stages(e){this.stages&&this.stages.forEach(t=>{var a=new FormData;a.append("id",t.id),a.append("stage_no",t.stage_no),a.append("stage_date",t.stage_date),a.append("description",t.description),a.append("ticket_id",e),axios.post("api/ticket/stages",a).then(e=>{console.log("stages uploaded")})})},submitTicket(){this.$validator.validateAll().then(async t=>{if(t){let t=this.$loading.show({container:this.$refs.vps_submit_pop});this.form.id?this.form.put("/api/ticket/"+this.form.id).then(a=>{a.data.success&&(e("#addNew").modal("hide"),Toast.fire({icon:"success",title:a.data.message}),this.upload_stages(this.form.id),this.upload_files(this.form.id),this.loadTickets()),t.hide()}).catch(()=>{t.hide(),void 0!==err.response.data&&this.$setErrorsFromResponse(err.response.data)}):this.form.post("/api/ticket").then(a=>{a.data.success&&(e("#addNew").modal("hide"),Toast.fire({icon:"success",title:a.data.message}),this.upload_files(a.data.data.id),this.loadTickets()),t.hide()}).catch(()=>{t.hide(),void 0!==err.response.data&&this.$setErrorsFromResponse(err.response.data)})}})},async check_free_service(){this.selected_machine&&(this.selected_machine.completed_free_service>=this.selected_machine.free_service_no?(this.form.service_type="Paid Service",this.form.free_service_no=""):this.form.free_service_no=this.selected_machine.completed_free_service+1,this.selected_machine&&"New"==this.selected_machine.machine_type&&this.form.service_type)},async get_machine(){axios.get("/api/ticket_machine",{params:{site_id:this.form.site_id,category_id:this.form.category_id,sub_category_id:this.form.sub_category_id}}).then(e=>{this.machines=e.data.data}).catch(()=>console.warn("Oh. Something went wrong"))}},mounted(){},created(){this.loadTickets()},beforeCreate(){axios.get("api/get_pre_machine").then(e=>{this.categories=e.data.data.Category,this.sites=e.data.data.sites}),axios.get("/api/initial_ticket").then(e=>{this.users=e.data.data.vendors,this.machines=e.data.data.machines,this.search_machines=e.data.data.machines,this.search_sites=e.data.data.sites}).catch(()=>console.warn("Oh. Something went wrong"))},watch:{"formclose.machine_status"(e){"Non Repairable"==e?(this.formclose.actual_material_cost=0,this.formclose.actual_service_cost=0):(this.formclose.actual_material_cost="",this.formclose.actual_service_cost="")},async"form.sub_category_id"(e,t){e&&this.get_machine()},async"form.site_id"(e,t){e&&this.get_machine()},"form.category_id":{handler:function(e,t){e&&(axios.get("api/category/"+e).then(e=>{this.sub_categories=e.data.data}),this.get_machine())},deep:!0,initial:!0},stages:{handler:function(e,t){if(e&&e.length>0){let t=e[e.length-1];t.stage_no&&(this.last_stage_index=this.opn_stage.indexOf(t.stage_no)),t.stage_date&&(this.last_stage_date=new Date(t.stage_date).toISOString())}else this.last_stage_index=0,this.pop_ticket&&this.pop_ticket.created_at?this.last_stage_date=new Date(this.pop_ticket.created_at).toISOString():this.last_stage_date=(new Date).toISOString()},deep:!0,initial:!0},async"form.maintenance_provider"(e){"vendor"!=e&&(this.form.service_type="Paid Service"),axios.get("api/user/list",{params:{type:e}}).then(e=>{this.users=e.data.data}).catch(()=>console.warn("Oh. Something went wrong"))},async"form.machine_id"(e){this.selected_machine=this.machines.find(t=>t.id===e),await this.check_free_service()},async"form.service_type"(e){"Free Service"==e&&await this.check_free_service()}}}}).call(this,a("EVdn"))},xt5z:function(e,t){e.exports=function(e){var t={};function a(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="fb15")}({2350:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",s=e[3];if(!s)return a;if(t&&"function"==typeof btoa){var i=(r=s,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),o=s.sources.map((function(e){return"/*# sourceURL="+s.sourceRoot+e+" */"}));return[a].concat(o).concat([i]).join("\n")}var r;return[a].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var s={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(s[o]=!0)}for(i=0;i<e.length;i++){var r=e[i];"number"==typeof r[0]&&s[r[0]]||(a&&!r[2]?r[2]=a:a&&(r[2]="("+r[2]+") and ("+a+")"),t.push(r))}},t}},"499e":function(e,t,a){"use strict";function s(e,t){for(var a=[],s={},i=0;i<t.length;i++){var o=t[i],r=o[0],n={id:e+":"+i,css:o[1],media:o[2],sourceMap:o[3]};s[r]?s[r].parts.push(n):a.push(s[r]={id:r,parts:[n]})}return a}a.r(t),a.d(t,"default",(function(){return v}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},r=i&&(document.head||document.getElementsByTagName("head")[0]),n=null,c=0,l=!1,_=function(){},d=null,p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function v(e,t,a,i){l=a,d=i||{};var r=s(e,t);return u(r),function(t){for(var a=[],i=0;i<r.length;i++){var n=r[i];(c=o[n.id]).refs--,a.push(c)}t?u(r=s(e,t)):r=[];for(i=0;i<a.length;i++){var c;if(0===(c=a[i]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete o[c.id]}}}}function u(e){for(var t=0;t<e.length;t++){var a=e[t],s=o[a.id];if(s){s.refs++;for(var i=0;i<s.parts.length;i++)s.parts[i](a.parts[i]);for(;i<a.parts.length;i++)s.parts.push(h(a.parts[i]));s.parts.length>a.parts.length&&(s.parts.length=a.parts.length)}else{var r=[];for(i=0;i<a.parts.length;i++)r.push(h(a.parts[i]));o[a.id]={id:a.id,refs:1,parts:r}}}}function m(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function h(e){var t,a,s=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(s){if(l)return _;s.parentNode.removeChild(s)}if(p){var i=c++;s=n||(n=m()),t=b.bind(null,s,i,!1),a=b.bind(null,s,i,!0)}else s=m(),t=k.bind(null,s),a=function(){s.parentNode.removeChild(s)};return t(e),function(s){if(s){if(s.css===e.css&&s.media===e.media&&s.sourceMap===e.sourceMap)return;t(e=s)}else a()}}var f,g=(f=[],function(e,t){return f[e]=t,f.filter(Boolean).join("\n")});function b(e,t,a,s){var i=a?"":s.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var o=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function k(e,t){var a=t.css,s=t.media,i=t.sourceMap;if(s&&e.setAttribute("media",s),d.ssrId&&e.setAttribute("data-vue-ssr-id",t.id),i&&(a+="\n/*# sourceURL="+i.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}},"4d93":function(e,t,a){(e.exports=a("2350")(!1)).push([e.i,".text-overflow-content[data-v-72c03b2a]{--nlines:3;--lineHeight:1.5;max-height:calc(var(--nlines)*var(--lineHeight));overflow:hidden;-webkit-transition:max-height .3s ease;transition:max-height .3s ease}.text-overflow[data-v-72c03b2a]{position:relative}.no-overflow .text-overflow-content[data-v-72c03b2a]{max-height:100%;overflow:visible}.no-overflow .button-read-more[data-v-72c03b2a],.no-overflow .hide-text[data-v-72c03b2a]{display:none}.read-more-button[data-v-72c03b2a]{cursor:pointer;display:block;position:relative;border-top:1px solid #dbdbdb;height:.1em;margin:2em auto;width:95%;text-align:center}.read-more-button span[data-v-72c03b2a]{background:#fff;color:#b5b5b5;display:inline-block;font-size:.75em;padding:.4em .8em;-webkit-transform:translateY(-1.1em);transform:translateY(-1.1em);text-align:center}.hide-text[data-v-72c03b2a]{--nlines:6;--lineHeight:1.5;background-image:-webkit-gradient(linear,left top,left bottom,from(hsla(0,0%,100%,0)),color-stop(90%,#fff),to(#fff));background-image:linear-gradient(180deg,hsla(0,0%,100%,0) 0,#fff 90%,#fff);width:100%;height:calc(var(--nlines)*var(--lineHeight));position:absolute;-webkit-transform:translateY(calc(var(--nlines)*-1*var(--lineHeight)));transform:translateY(calc(var(--nlines)*-1*var(--lineHeight)))}.hide-text[data-v-72c03b2a],.read-more-button[data-v-72c03b2a]{-webkit-transition:opacity .3s ease,margin .3s ease;transition:opacity .3s ease,margin .3s ease;opacity:1}.expanded .hide-text[data-v-72c03b2a],.expanded .read-more-button[data-v-72c03b2a]:not(.show-less){opacity:0;margin-top:0;margin-bottom:0;pointer-events:none}",""])},6099:function(e,t,a){var s=a("4d93");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,a("499e").default)("e6468484",s,!0,{sourceMap:!1,shadowMode:!1})},"6b0e":function(e,t,a){"use strict";var s=a("6099");a.n(s).a},f6fd:function(e,t){!function(e){var t=e.getElementsByTagName("script");"currentScript"in e||Object.defineProperty(e,"currentScript",{get:function(){try{throw new Error}catch(s){var e,a=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(s.stack)||[!1])[1];for(e in t)if(t[e].src==a||"interactive"==t[e].readyState)return t[e];return null}}})}(document)},fb15:function(e,t,a){"use strict";var s;(a.r(t),"undefined"!=typeof window)&&(a("f6fd"),(s=window.document.currentScript)&&(s=s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(a.p=s[1]));var i={name:"vue-read-more-smooth",props:{lines:{type:Number,default:3},gLines:{type:Number,default:null},maxLines:{type:Number,default:null},text:{type:String,default:"Read more"},textLess:{type:String,default:"Read less"},noLess:{type:Boolean,default:!1},openByDefault:{type:Boolean,default:!1},open:{type:Boolean,default:null},noButton:{type:Boolean,default:!1},noShadow:{type:Boolean,default:!1}},data:()=>({readmore:!1,expanded:!1,inMaxRange:!1,localMaxLines:1}),watch:{open(e){e!==this.expanded&&this.toggle(!e)}},created(){this.lines&&!this.maxLines?this.localMaxLines=this.lines+1:this.localMaxLines=this.maxLines-1,!0===this.open&&(this.expanded=!0)},mounted(){const e=this.getLineHeight(this.$refs.to);this.lines&&this.$refs.to.style.setProperty("--nlines",this.lines);let t=2;this.gLines?t=this.gLines:this.lines>12?t=4:this.lines>6&&(t=3),this.$refs.ht&&this.$refs.ht.style.setProperty("--nlines",t),!0===this.open&&this.$refs.to.style.setProperty("max-height","100%"),setTimeout(()=>{this.readmore=this.$refs.to.offsetHeight<this.$refs.to.scrollHeight,this.$refs.to.scrollHeight<=this.localMaxLines*e&&(this.inMaxRange=!0),this.$refs.to.style.setProperty("--lineHeight",e+"px"),this.$refs.ht&&this.$refs.ht.style.setProperty("--lineHeight",e+"px"),!0===this.open&&this.$refs.to.style.setProperty("max-height",this.$refs.to.scrollHeight+"px")})},methods:{toggle(e){("boolean"==typeof e?e:this.expanded)?this.noLess||(this.$refs.to.style.removeProperty("max-height"),this.expanded=!1,this.$emit("update:open",!1)):(this.expanded=!0,this.$emit("update:open",!0),this.$refs.to.style.setProperty("max-height",this.$refs.to.scrollHeight+"px"))},getLineHeight(e){let t=document.createElement(e.children[0].nodeName);const a=getComputedStyle(e.children[0]);t.setAttribute("style","position:absolute;left:-999em;margin:0px;padding:0px;font-family:"+a.fontFamily+";font-size:"+a.fontSize),t.innerHTML="test",t=document.body.appendChild(t);const s=t.clientHeight;return t.parentNode.removeChild(t),s}}};a("6b0e");var o=function(e,t,a,s,i,o,r,n){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=a,l._compiled=!0),s&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),r?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},l._ssrRegister=c):i&&(c=n?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var _=l.render;l.render=function(e,t){return c.call(t),_(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-overflow",class:{expanded:e.expanded,"no-overflow":e.inMaxRange}},[a("div",{ref:"to",staticClass:"text-overflow-content"},[e._t("default")],2),e.noShadow?e._e():a("div",{ref:"ht",staticClass:"hide-text"}),e.noButton?e._e():a("div",{staticClass:"button-read-more",on:{click:e.toggle}},[e._t("more",[a("div",{staticClass:"read-more-button",class:{"show-less":!e.noLess}},[a("span",[e._v(e._s(e.expanded?e.textLess:e.text))])])],{open:e.expanded})],2)])}),[],!1,null,"72c03b2a",null).exports;t.default=o}}).default}}]);
//# sourceMappingURL=5.bundle.31d77b441c973e739af6.js.map