(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{24:function(t,a,e){"use strict";(function(t){var s=e(30);a.a={name:"Machine",components:{VueGauge:s.a},data:()=>({cam_list:"",Machines:{},pmModalData:"",sites:[],machine_existing_site:{site_name:"",from_date:""},form:new Form({machine_id:"",site_id:"",from_date:"",to_date:"",redeployment_reason:""})}),beforeCreate(){axios.get("api/get_pre_machine").then(t=>{this.sites=t.data.data.sites})},methods:{get_del(t,a,e,s,i=30){let r=t/i;return[r-r*a/100,r-r*e/100,r-r*s/100]},async view_pm_details(a){this.pmModalData=a,t("#pmModal").modal("show")},getResults(t=1){axios.get("api/machine?page="+t).then(({data:t})=>this.Machines=t.data)},loadMachines(){axios.get("api/machine").then(({data:t})=>this.Machines=t.data)},AssingMachine(a,e){this.form.machine_id=a,this.machine_existing_site.site_name=e?e.site_name:"",this.machine_existing_site.from_date=e?e.from_date:"",t("#assignModal").modal("show")},get_machine_list(a){let e=this.$loading.show({container:this.$refs.ref_load_user});axios.get("/api/machine/site/"+a).then(a=>{this.cam_list=a.data.data,t("#CamListModal").modal("show"),e.hide()}).catch(t=>{e.hide()})},async submitAssignSite(){this.$validator.validateAll().then(async a=>{if(a){this.verrors.clear();let a=this.$loading.show({container:this.$refs.ref_load_user});this.form.post("api/machine/assign_site").then(e=>{this.$validator.reset(),a.hide(),this.form.id=e.data.data.id,this.form.reset(),this.machine_existing_site={site_name:"",from_date:""},t("#assignModal").modal("hide"),this.getResults(),Toast.fire({icon:"success",title:e.data.message})}).catch(t=>{t.response&&t.response.data&&this.$setErrorsFromResponse(t.response.data),a.hide()})}})},deleteMachine(t){Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(a=>{a.value&&this.form.delete("api/machine/"+t).then(()=>{Swal.fire("Deleted!","Your file has been deleted.","success"),this.loadMachines()}).catch(t=>{Swal.fire("Failed!",t.message,"warning")})})}},mounted(){},created(){this.loadMachines()}}}).call(this,e(3))},370:function(t,a,e){"use strict";e.r(a);var s=e(24),i=e(2),r=Object(i.a)(s.a,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"content"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("h3",{staticClass:"card-title"},[t._v("Machine List")]),t._v(" "),e("div",{staticClass:"card-tools"},[e("router-link",{staticClass:"btn btn-sm btn-primary",attrs:{to:"/machines/add"}},[e("i",{staticClass:"fa fa-plus-square",attrs:{"aria-hidden":"true"}}),t._v(" Add New\n                            ")])],1)]),t._v(" "),e("div",{staticClass:"card-body table-responsive p-0"},[e("table",{staticClass:"table table-hover"},[t._m(0),t._v(" "),e("tbody",t._l(t.Machines.data,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[t._v(t._s(a.far_no))]),t._v(" "),e("td",{staticClass:"align-middle"},[t._v(t._s(a.name))]),t._v(" "),e("td",{staticClass:"align-middle"},[t._v(t._s(a.owner))]),t._v(" "),e("td",{staticClass:"align-middle",on:{click:function(e){return t.view_pm_details(a)}}},[e("VueGauge",{attrs:{refid:"mg-id"+a.id,options:{needleValue:a.next_pm_date.early,arcDelimiters:[10,36,78],arcColors:["red","orange","yellow","green"],chartWidth:"80"}}})],1),t._v(" "),e("td",{staticClass:"align-middle"},[t._v(t._s(t._f("myDate")(a.purchase_date)))]),t._v(" "),e("td",{staticClass:"align-middle"},[t._v(t._s(a.condition_of_machine))]),t._v(" "),e("td",{staticClass:"align-middle"},[t._v(t._s(a.current_site?a.current_site.site_name:"-"))]),t._v(" "),e("td",{staticClass:"align-middle"},[e("router-link",{staticClass:"btn btn-success btn-sm",attrs:{to:"/machines/edit/"+a.id}},[t._v("\n                                            Edit ")]),t._v(" "),e("a",{staticClass:"btn btn-primary btn-sm",attrs:{href:"javascript:void(0);",title:"Assign to site"},on:{click:function(e){return t.AssingMachine(a.id,a.current_site)}}},[t._v("\n                                            CAM\n                                        ")]),t._v(" "),e("a",{staticClass:"btn btn-primary btn-sm",staticStyle:{"background-color":"#861cac"},attrs:{href:"javascript:void(0);",title:"List of Assign to site"},on:{click:function(e){return t.get_machine_list(a.id)}}},[t._v("\n                                            CAM List\n                                        ")])],1)])})),0)])]),t._v(" "),e("div",{staticClass:"card-footer"},[t.Machines?e("pagination",{attrs:{data:t.Machines},on:{"pagination-change-page":t.getResults}}):t._e()],1)])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"pmModal",tabindex:"-1",role:"dialog","aria-labelledby":"pmModal","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"container"},[e("p",[e("strong",[t._v("Far No :")]),t._v(" "+t._s(t.pmModalData.far_no)+"\n                            "),e("br"),t._v(" "),e("strong",[t._v("Machine Name :")]),t._v(" "+t._s(t.pmModalData.name)+"\n                        ")]),t._v(" "),e("div",{staticClass:"row"},[t.pmModalData.is_maintenance_date?e("div",{staticClass:"col-sm pb-3"},[e("VueGauge",{attrs:{refid:"popg1",options:{needleValue:t.pmModalData.next_pm_date.maintenance_date,arcDelimiters:[Number(t.pmModalData.next_pm_date.settings.date_red),Number(t.pmModalData.next_pm_date.settings.date_orange),Number(t.pmModalData.next_pm_date.settings.date_yellow)],arcColors:["red","orange","yellow","green"],chartWidth:"180",rangeLabel:["0",t.pmModalData.date_threshold.toString()],arcLabels:[t.pmModalData.next_pm_date.settings.date_red.toString(),t.pmModalData.next_pm_date.settings.date_orange.toString(),t.pmModalData.next_pm_date.settings.date_yellow.toString(),t.pmModalData.next_pm_date.settings.date_green.toString()],arcOverEffect:!0}}}),t._v(" "),e("p",{staticClass:"text-center"},[t._v("Remaining Days")])],1):t._e(),t._v(" "),t.pmModalData.is_consumtion_km_run?e("div",{staticClass:"col-sm pb-3"},[e("VueGauge",{attrs:{refid:"popg2",options:{needleValue:t.pmModalData.next_pm_date.km_run,arcDelimiters:t.get_del(t.pmModalData.run_km_threshold,Number(t.pmModalData.next_pm_date.settings.km_red),Number(t.pmModalData.next_pm_date.settings.km_orange),Number(t.pmModalData.next_pm_date.settings.km_yellow),100),arcColors:["red","orange","yellow","green"],chartWidth:"180",rangeLabel:["0",t.pmModalData.run_km_threshold.toString()],arcLabels:[t.pmModalData.next_pm_date.settings.km_red.toString(),t.pmModalData.next_pm_date.settings.km_orange.toString(),t.pmModalData.next_pm_date.settings.km_yellow.toString(),t.pmModalData.next_pm_date.settings.km_green.toString()],arcOverEffect:!0}}}),t._v(" "),e("p",{staticClass:"text-center"},[t._v("Remaining KM")])],1):t._e(),t._v(" "),t.pmModalData.is_consumtion_hr_run?e("div",{staticClass:"col-sm"},[e("VueGauge",{attrs:{refid:"popg3",options:{needleValue:t.pmModalData.next_pm_date.hr_run,arcDelimiters:t.get_del(t.pmModalData.run_hour_threshold,Number(t.pmModalData.next_pm_date.settings.hr_red),Number(t.pmModalData.next_pm_date.settings.hr_orange),Number(t.pmModalData.next_pm_date.settings.hr_yellow),10),arcColors:["red","orange","yellow","green"],chartWidth:"180",rangeLabel:["0",t.pmModalData.run_hour_threshold.toString()],arcLabels:[t.pmModalData.next_pm_date.settings.hr_red.toString(),t.pmModalData.next_pm_date.settings.hr_orange.toString(),t.pmModalData.next_pm_date.settings.hr_yellow.toString(),t.pmModalData.next_pm_date.settings.hr_green.toString()],arcOverEffect:!0}}}),t._v(" "),e("p",{staticClass:"text-center"},[t._v("Remaining Hours")])],1):t._e(),t._v(" "),t.pmModalData.is_production_fig?e("div",{staticClass:"col-sm"},[e("VueGauge",{attrs:{refid:"popg4",options:{needleValue:t.pmModalData.next_pm_date.production_fig,arcDelimiters:t.get_del(t.pmModalData.production_fig_threshold,Number(t.pmModalData.next_pm_date.settings.prdfig_red),Number(t.pmModalData.next_pm_date.settings.prdfig_orange),Number(t.pmModalData.next_pm_date.settings.prdfig_yellow),50),arcColors:["red","orange","yellow","green"],chartWidth:"180",rangeLabel:["0",t.pmModalData.production_fig_threshold.toString()],arcLabels:[t.pmModalData.next_pm_date.settings.prdfig_red.toString(),t.pmModalData.next_pm_date.settings.prdfig_orange.toString(),t.pmModalData.next_pm_date.settings.prdfig_yellow.toString(),t.pmModalData.next_pm_date.settings.prdfig_green.toString()],arcOverEffect:!0}}}),t._v(" "),e("p",{staticClass:"text-center"},[t._v("Remaining Production")])],1):t._e()])])])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"assignModal",tabindex:"-1",role:"dialog","aria-labelledby":"assignModal","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),e("form",{on:{submit:function(a){return a.preventDefault(),t.submitAssignSite()}}},[e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Existing Site")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:t.machine_existing_site.site_name}})])]),t._v(" "),e("div",{staticClass:"col-4"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Allocate to Site")]),t._v(" "),e("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"required",class:{"is-invalid":t.verrors.has("site_id")},attrs:{label:"site_name",reduce:function(t){return t.id},options:t.sites,placeholder:"Choose Site ...","data-vv-as":"site",name:"site_id"},model:{value:t.form.site_id,callback:function(a){t.$set(t.form,"site_id",a)},expression:"form.site_id"}}),t._v(" "),t.verrors.has("site_id")?e("div",{staticClass:"help-block invalid-feedback"},[t._v("\n                                        "+t._s(t.verrors.first("site_id"))+"\n                                    ")]):t._e()],1)]),t._v(" "),e("div",{staticClass:"col-4"},[e("div",{staticClass:"form-group"},[e("label",[t._v("From Date")]),t._v(" "),e("datetime",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.verrors.has("from_date")},attrs:{name:"from_date","input-class":"form-control required","data-vv-as":"From Date","min-datetime":t.machine_existing_site.from_date},model:{value:t.form.from_date,callback:function(a){t.$set(t.form,"from_date",a)},expression:"form.from_date"}}),t._v(" "),t.verrors.has("from_date")?e("div",{staticClass:"help-block invalid-feedback"},[t._v(" "+t._s(t.verrors.first("from_date"))+"\n                                    ")]):t._e()],1)]),t._v(" "),e("div",{staticClass:"col-12"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Reason for Redeployment")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.redeployment_reason,expression:"form.redeployment_reason"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control required",class:{"is-invalid":t.verrors.has("redeployment_reason")},attrs:{name:"redeployment_reason","data-vv-as":"redeployment reason"},domProps:{value:t.form.redeployment_reason},on:{input:function(a){a.target.composing||t.$set(t.form,"redeployment_reason",a.target.value)}}}),t._v(" "),t.verrors.has("redeployment_reason")?e("div",{staticClass:"help-block invalid-feedback"},[t._v(" "+t._s(t.verrors.first("redeployment_reason"))+"\n                                    ")]):t._e()])])])]),t._v(" "),t._m(3)])])])]),t._v(" "),e("div",{staticClass:"modal",attrs:{id:"CamListModal"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[t._m(4),t._v(" "),e("div",{staticClass:"modal-body"},[e("table",{staticClass:"table table-striped"},[t._m(5),t._v(" "),e("tbody",t._l(t.cam_list,(function(a,s){return t.cam_list?e("tr",{key:s},[e("td",{domProps:{innerHTML:t._s(a.site_name)}}),t._v(" "),e("td",[t._v(t._s(a.from_date))]),t._v(" "),e("td",[t._v(t._s(a.redeployment_reason))])]):t._e()})),0)])]),t._v(" "),t._m(6)])])])])}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("FAR No ")]),t._v(" "),e("th",[t._v("Name")]),t._v(" "),e("th",[t._v("Owner")]),t._v(" "),e("th",[t._v("Chart")]),t._v(" "),e("th",[t._v("Purchase Date")]),t._v(" "),e("th",[t._v("Machine Condition")]),t._v(" "),e("th",[t._v("Current Site")]),t._v(" "),e("th",[t._v("Action")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[this._v("View PM Details")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[this._v("Machine Asssign to Site")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Close")]),this._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Create CAM")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[this._v("CAM List")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[this._v("×")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",[a("th",[this._v("Site Name")]),this._v(" "),a("th",[this._v("From Date")]),this._v(" "),a("th",[this._v("Redeployment Reason")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Close")])])}],!1,null,null,null);a.default=r.exports}}]);
//# sourceMappingURL=6.bundle.74359e20d48c14437ac2.js.map