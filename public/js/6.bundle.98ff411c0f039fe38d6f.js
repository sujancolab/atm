(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{21:function(e,t,a){"use strict";(function(e){var s=a(8),i=a.n(s);t.a={components:{VueTagsInput:i()},data:()=>({editmode:!1,Sites:{},form:new Form({id:"",site_id:"",site_name:"",address:"",state:"",city:"",zip_code:"",allocate_user:[]}),categories:[],users:[],tag:"",autocompleteItems:[]}),methods:{getResults(e=1){this.$Progress.start(),axios.get("api/site?page="+e).then(({data:e})=>this.Sites=e.data),this.$Progress.finish()},loadSites(){axios.get("api/site").then(({data:e})=>this.Sites=e.data)},loadCategories(){axios.get("/api/category/list").then(({data:e})=>this.categories=e.data)},loadTags(){axios.get("/api/user/list").then(e=>{this.users=e.data.data,this.autocompleteItems=e.data.data.map(e=>({text:e.name,id:e.id}))}).catch(()=>console.warn("Oh. Something went wrong"))},editModal(t){this.editmode=!0,this.form.reset(),e("#addNew").modal("show"),this.form.fill(t),this.form.allocate_user=t.allocate_users.map(e=>e.id)},newModal(){this.editmode=!1,this.form.reset(),e("#addNew").modal("show")},createSite(){this.$validator.validateAll().then(async t=>{t&&(this.verrors.clear(),this.form.post("api/site").then(t=>{t.data.success?(e("#addNew").modal("hide"),Toast.fire({icon:"success",title:t.data.message}),this.loadSites()):Toast.fire({icon:"error",title:"Some error occured! Please try again"})}).catch(e=>{e.response&&e.response.data&&this.$setErrorsFromResponse(e.response.data)}))})},updateSite(){this.$validator.validateAll().then(async t=>{t&&(this.verrors.clear(),this.form.put("api/site/"+this.form.id).then(t=>{e("#addNew").modal("hide"),Toast.fire({icon:"success",title:t.data.message}),this.$Progress.finish(),this.loadSites()}).catch(e=>{e.response&&e.response.data&&this.$setErrorsFromResponse(e.response.data)}))})},deleteSite(e){Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.value&&this.form.delete("api/site/"+e).then(()=>{Swal.fire("Deleted!","Your file has been deleted.","success"),this.loadSites()}).catch(e=>{Swal.fire("Failed!",e.message,"warning")})})}},mounted(){},created(){this.$Progress.start(),this.loadSites(),this.loadTags(),this.$Progress.finish()},filters:{truncate:function(e,t,a){return e.substring(0,t)+a}},computed:{filteredItems(){return this.autocompleteItems.filter(e=>-1!==e.text.toLowerCase().indexOf(this.tag.toLowerCase()))}}}}).call(this,a(4))},362:function(e,t,a){"use strict";a.r(t);var s=a(21),i=a(2),r=Object(i.a)(s.a,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"content"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[e._v("Site List")]),e._v(" "),a("div",{staticClass:"card-tools"},[a("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:e.newModal}},[a("i",{staticClass:"fa fa-plus-square"}),e._v("\n                                Add New\n                            ")])])]),e._v(" "),a("div",{staticClass:"card-body table-responsive p-0"},[a("table",{staticClass:"table table-hover"},[e._m(0),e._v(" "),a("tbody",e._l(e.Sites.data,(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.site_id))]),e._v(" "),a("td",[e._v(e._s(t.site_name))]),e._v(" "),a("td",[e._v(e._s(t.address))]),e._v(" "),a("td",[e._v(e._s(t.state))]),e._v(" "),a("td",[e._v(e._s(t.city))]),e._v(" "),a("td",[e._v(e._s(t.zip_code))]),e._v(" "),a("td",[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(a){return e.editModal(t)}}},[a("i",{staticClass:"fa fa-edit blue"})]),e._v("\n                                        /\n                                        "),a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(a){return e.deleteSite(t.id)}}},[a("i",{staticClass:"fa fa-trash red"})])])])})),0)])]),e._v(" "),a("div",{staticClass:"card-footer"},[e.Sites?a("pagination",{attrs:{data:e.Sites},on:{"pagination-change-page":e.getResults}}):e._e()],1)])])]),e._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"addNew",tabindex:"-1",role:"dialog","aria-labelledby":"addNew","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{directives:[{name:"show",rawName:"v-show",value:!e.editmode,expression:"!editmode"}],staticClass:"modal-title"},[e._v("Create New Site")]),e._v(" "),a("h5",{directives:[{name:"show",rawName:"v-show",value:e.editmode,expression:"editmode"}],staticClass:"modal-title"},[e._v("Edit Site")]),e._v(" "),e._m(1)]),e._v(" "),a("form",{on:{submit:function(t){t.preventDefault(),e.editmode?e.updateSite():e.createSite()}}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Site Id")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.site_id,expression:"form.site_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("site_id")},attrs:{type:"text",name:"site_id","data-vv-as":"Site Id"},domProps:{value:e.form.site_id},on:{input:function(t){t.target.composing||e.$set(e.form,"site_id",t.target.value)}}}),e._v(" "),e.verrors.has("site_id")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(" "+e._s(e.verrors.first("site_id")))]):e._e()]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",[e._v("Site Name")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.site_name,expression:"form.site_name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("site_name")},attrs:{type:"text",name:"site_name","data-vv-as":"site name"},domProps:{value:e.form.site_name},on:{input:function(t){t.target.composing||e.$set(e.form,"site_name",t.target.value)}}}),e._v(" "),e.verrors.has("site_name")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(" "+e._s(e.verrors.first("site_name")))]):e._e()]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",[e._v("Site Address")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.address,expression:"form.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("address")},attrs:{type:"text",name:"address","data-vv-as":"address"},domProps:{value:e.form.address},on:{input:function(t){t.target.composing||e.$set(e.form,"address",t.target.value)}}}),e._v(" "),e.verrors.has("address")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(" "+e._s(e.verrors.first("address")))]):e._e()]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",[e._v("State")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.state,expression:"form.state"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("state")},attrs:{type:"text",name:"state","data-vv-as":"state"},domProps:{value:e.form.state},on:{input:function(t){t.target.composing||e.$set(e.form,"state",t.target.value)}}}),e._v(" "),e.verrors.has("state")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(" "+e._s(e.verrors.first("state")))]):e._e()]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",[e._v("City")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.city,expression:"form.city"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("city")},attrs:{type:"text",name:"city","data-vv-as":"city"},domProps:{value:e.form.city},on:{input:function(t){t.target.composing||e.$set(e.form,"city",t.target.value)}}}),e._v(" "),e.verrors.has("city")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(" "+e._s(e.verrors.first("city")))]):e._e()]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",[e._v("Zip Code")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.zip_code,expression:"form.zip_code"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.verrors.has("zip_code")},attrs:{type:"text",name:"zip_code","data-vv-as":"zip code"},domProps:{value:e.form.zip_code},on:{input:function(t){t.target.composing||e.$set(e.form,"zip_code",t.target.value)}}}),e._v(" "),e.verrors.has("zip_code")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(" "+e._s(e.verrors.first("zip_code")))]):e._e()]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",[e._v("Allocate Users ")]),e._v(" "),a("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":e.verrors.has("allocate_user")},attrs:{multiple:"",label:"name",reduce:function(e){return e.id},options:e.users,placeholder:"Enter users ...",name:"allocate_user","data-vv-as":"Allocate Users"},model:{value:e.form.allocate_user,callback:function(t){e.$set(e.form,"allocate_user",t)},expression:"form.allocate_user"}}),e._v(" "),e.verrors.has("allocate_user")?a("div",{staticClass:"help-block invalid-feedback"},[e._v(" "+e._s(e.verrors.first("allocate_user")))]):e._e()],1)]),e._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Close")]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:e.editmode,expression:"editmode"}],staticClass:"btn btn-success",attrs:{type:"submit"}},[e._v("Update")]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:!e.editmode,expression:"!editmode"}],staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Create")])])])])])])])])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Site ID")]),e._v(" "),a("th",[e._v("Name")]),e._v(" "),a("th",[e._v("Address")]),e._v(" "),a("th",[e._v("State")]),e._v(" "),a("th",[e._v("City")]),e._v(" "),a("th",[e._v("Zip Code")]),e._v(" "),a("th",[e._v("Action")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null);t.default=r.exports}}]);
//# sourceMappingURL=6.bundle.98ff411c0f039fe38d6f.js.map