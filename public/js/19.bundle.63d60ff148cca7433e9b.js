(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"yW3/":function(t,a,e){"use strict";e.r(a);var s={data:()=>({records:"",search:{type:"RMC",financial_year:"",quarter:"",date_from:"",date_to:"",site_id:"",category_id:"",sub_category_id:"",machine_id:""},monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],series:[{data:[400,430,448,470,540,580,690,1100,1200,1380]}],chartOptions:{chart:{type:"bar",height:350},plotOptions:{bar:{borderRadius:4,horizontal:!0}},dataLabels:{enabled:!1},xaxis:{categories:["South Korea","Canada","United Kingdom","Netherlands","Italy","France","Japan","United States","China","Germany"]}},financial_years:[],search_machines:[],search_sites:[],search_tickets:[],categories:[],sub_categories:[],sites:[],machines:[]}),watch:{"search.quarter"(t){t&&(this.search.date_from="",this.search.date_to="",this.search.month="")},"search.date_from"(t){t&&(this.search.month="",this.search.quarter="")},"search.date_to"(t){t&&(this.search.month="",this.search.quarter="")},"search.month"(t){t&&(this.search.date_from="",this.search.date_to="",this.search.quarter="")},search:{handler:function(t){axios.post("api/dashboard",this.search).then(t=>{this.records=t.data.data,this.barEquipmentOptions.xaxis.categories=t.data.data.EquipmentChart.options.xaxis.categories,this.barProjectOptions.xaxis.categories=t.data.data.ProjectChart.options.xaxis.categories}).catch(t=>{console.error(t)})},deep:!0},async"search.sub_category_id"(t,a){t&&this.get_machine()},async"search.site_id"(t,a){t&&this.get_machine()},"search.category_id":{handler:function(t,a){t&&(axios.get("api/category/"+t).then(t=>{this.sub_categories=t.data.data}),this.get_machine())},deep:!0,initial:!0}},created(){for(var t=(new Date).getFullYear(),a=2022;a<=t;a++){var e=a+"-"+(a+1).toString();this.financial_years.push(e)}},beforeCreate(){axios.post("api/dashboard",{type:"RMC"}).then(t=>{this.records=t.data.data,this.barEquipmentOptions=t.data.data.EquipmentChart,this.barProjectOptions.xaxis.categories=t.data.data.ProjectChart.options.xaxis.categories}).catch(t=>{console.error(t)}),axios.get("api/get_pre_machine").then(t=>{this.categories=t.data.data.Category,this.sites=t.data.data.sites}),axios.get("/api/initial_ticket").then(t=>{this.users=t.data.data.vendors,this.machines=t.data.data.machines,this.search_machines=t.data.data.machines,this.search_sites=t.data.data.sites,this.created_users=t.data.data.created_users}).catch(()=>console.warn("Oh. Something went wrong"))},mounted(){this.$gate.isAdmin()||this.$router.push("/tickets").catch(()=>{})},methods:{getLabel:t=>"object"==typeof t?t.far_no+" - "+t.name:t,async get_machine(){axios.get("/api/reports/machines",{params:{site_id:this.search.site_id,category_id:this.search.category_id,sub_category_id:this.search.sub_category_id}}).then(t=>{this.search_machines=t.data.data}).catch(()=>console.warn("Oh. Something went wrong"))}}},i=e("JFUb"),r=Object(i.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"content"},[t.records?e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"col"},[e("label",{attrs:{for:""}},[t._v("FY")]),t._v(" "),e("v-select",{attrs:{options:t.financial_years,placeholder:"Select FY...",name:"financial_year"},model:{value:t.search.financial_year,callback:function(a){t.$set(t.search,"financial_year",a)},expression:"search.financial_year"}})],1),t._v(" "),t.search.date_from||t.search.date_to||t.search.month?t._e():e("div",{staticClass:"col"},[e("label",{attrs:{for:""}},[t._v("Quarter")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.search.quarter,expression:"search.quarter"}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.search,"quarter",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("--")]),t._v(" "),e("Option",{attrs:{value:"4-6"}},[t._v("1")]),t._v(" "),e("Option",{attrs:{value:"7-9"}},[t._v("2")]),t._v(" "),e("Option",{attrs:{value:"10-12"}},[t._v("3")]),t._v(" "),e("Option",{attrs:{value:"1-3"}},[t._v("4")])],1)]),t._v(" "),t.search.date_from||t.search.date_to||t.search.quarter?t._e():e("div",{staticClass:"col"},[e("label",{attrs:{for:""}},[t._v("Month")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.search.month,expression:"search.month"}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.search,"month",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("--")]),t._v(" "),t._l(t.monthNames,(function(a,s){return e("Option",{key:"m"+s,attrs:{value:s+1}},[t._v(t._s(a))])}))],2)]),t._v(" "),t.search.month||t.search.quarter?t._e():e("div",{staticClass:"col"},[e("label",{attrs:{for:""}},[t._v("From Date")]),t._v(" "),e("datetime",{attrs:{"value-zone":"Asia/Kolkata","input-class":"form-control",placeholder:"Created from date"},model:{value:t.search.date_from,callback:function(a){t.$set(t.search,"date_from",a)},expression:"search.date_from"}})],1),t._v(" "),t.search.month||t.search.quarter?t._e():e("div",{staticClass:"col"},[e("label",{attrs:{for:""}},[t._v("To Date")]),t._v(" "),e("datetime",{attrs:{"value-zone":"Asia/Kolkata","input-class":"form-control",placeholder:"Created to date"},model:{value:t.search.date_to,callback:function(a){t.$set(t.search,"date_to",a)},expression:"search.date_to"}})],1),t._v(" "),e("div",{staticClass:"col"},[e("label",{attrs:{for:""}},[t._v("Project Name")]),t._v(" "),e("v-select",{attrs:{label:"site_name",reduce:function(t){return t.id},options:t.search_sites,placeholder:"Choose Project...",name:"site_id"},model:{value:t.search.site_id,callback:function(a){t.$set(t.search,"site_id",a)},expression:"search.site_id"}})],1),t._v(" "),e("div",{staticClass:"col"},[e("label",{attrs:{for:""}},[t._v("Equipment Category")]),t._v(" "),e("v-select",{attrs:{label:"name",reduce:function(t){return t.id},options:t.categories,placeholder:"Choose Category ..."},model:{value:t.search.category_id,callback:function(a){t.$set(t.search,"category_id",a)},expression:"search.category_id"}},[t._v("\\\n                        ")])],1),t._v(" "),e("div",{staticClass:"col"},[e("label",{attrs:{for:""}},[t._v("Description")]),t._v(" "),e("v-select",{attrs:{label:"name",reduce:function(t){return t.id},options:t.sub_categories,placeholder:"Choose description ..."},model:{value:t.search.sub_category_id,callback:function(a){t.$set(t.search,"sub_category_id",a)},expression:"search.sub_category_id"}})],1),t._v(" "),e("div",{staticClass:"col"},[e("label",{attrs:{for:""}},[t._v("Equipment Name")]),t._v(" "),e("v-select",{attrs:{label:"name","get-option-label":t.getLabel,reduce:function(t){return t.id},options:t.search_machines,placeholder:"Choose Equipment ...",name:"machine_id"},model:{value:t.search.machine_id,callback:function(a){t.$set(t.search,"machine_id",a)},expression:"search.machine_id"}})],1)])])]),t._v(" "),e("div",{staticClass:"row row-eq-height"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card"},[t._m(0),t._v(" "),e("div",{staticClass:"card-body p-1"},[e("apexchart",{attrs:{type:"bar",height:"350",options:t.barEquipmentOptions.options,series:t.barEquipmentOptions.series}})],1)])]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"row text-center"},[e("div",{staticClass:"col-6 p-0"},[e("div",{staticClass:"col-12 p-1"},[e("div",{staticClass:"info-box bg-yellow"},[e("div",{staticClass:"info-box-content"},[e("span",{staticClass:"info-box-number"},[t._v(t._s(t.records.total_tickets))]),t._v(" "),e("span",{staticClass:"info-box-text"},[t._v("Total Cost - Repair & Maintenance (Excluding\n                                        Taxes)")])])])]),t._v(" "),e("div",{staticClass:"col-12 p-1"},[e("div",{staticClass:"row text-center"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"info-box bg-yellow"},[e("div",{staticClass:"info-box-content"},[e("span",{staticClass:"info-box-number"},[t._v(t._s(t.records.total_tickets))]),t._v(" "),e("span",{staticClass:"info-box-text"},[t._v("Supply (Excluding\n                                                Taxes)")])])])]),t._v(" "),e("div",{staticClass:"col-6"},[e("div",{staticClass:"info-box bg-yellow"},[e("div",{staticClass:"info-box-content"},[e("span",{staticClass:"info-box-number"},[t._v(t._s(t.records.total_tickets))]),t._v(" "),e("span",{staticClass:"info-box-text"},[t._v("Service (Excluding\n                                                Taxes)")])])])])])])]),t._v(" "),e("div",{staticClass:"col-6 p-0"},[t._v("\n                        R&M Cost - Value by FY\n                        "),e("apexchart",{attrs:{type:"line",height:"350",options:t.chartOptions,series:t.series}})],1)]),t._v(" "),e("div",{staticClass:"row text-center"},[e("div",{staticClass:"col-6 p-0"},[e("apexchart",{attrs:{type:"bar",height:"350",options:t.chartOptions,series:t.series}})],1),t._v(" "),e("div",{staticClass:"col-6 p-0"},[e("apexchart",{attrs:{type:"bar",height:"350",options:t.chartOptions,series:t.series}})],1)])])])]):t._e()])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[this._v("Sum of value by Equipment Name")]),this._v(" "),a("div",{staticClass:"card-tools"},[a("button",{staticClass:"btn btn-tool",attrs:{type:"button","data-card-widget":"collapse"}},[a("i",{staticClass:"fas fa-minus"})])])])}],!1,null,null,null);a.default=r.exports}}]);
//# sourceMappingURL=19.bundle.63d60ff148cca7433e9b.js.map