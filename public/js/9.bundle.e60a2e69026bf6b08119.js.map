{"version":3,"sources":["webpack:///./resources/js/components/Machine/Category.vue","webpack:///./resources/js/components/Machine/Category.vue?51d9","webpack:///resources/js/components/Machine/Category.vue"],"names":["Component","_vm","this","_h","$createElement","_c","_self","staticClass","$gate","isAdmin","_v","attrs","on","newModal","$event","preventDefault","getResults","directives","name","rawName","value","expression","domProps","target","composing","search","export_csv","json_fields","startDownload","finishDownload","_m","_l","categories","category","x","key","id","_s","from","parent_category","created_by_name","_f","created_at","editModal","_e","editmode","updateCategory","createCategory","form","class","errors","has","$set","option","parent_categories","model","callback","$$v","data","parent_id","field","json_meta","methods","params","Swal","title","html","allowOutsideClick","onBeforeOpen","axios","page","then","$","Toast","icon","catch","loadCategories","created"],"mappings":"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","file":"js/9.bundle.e60a2e69026bf6b08119.js","sourcesContent":["/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Category.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Category.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c85b99c2\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Category.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"content\"},[_c('div',{staticClass:\"container-fluid\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12\"},[(_vm.$gate.isAdmin())?_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header\"},[_c('h3',{staticClass:\"card-title\"},[_vm._v(\"Category List\")]),_vm._v(\" \"),_c('div',{staticClass:\"card-tools\"},[_c('button',{staticClass:\"btn btn-sm btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.newModal}},[_c('i',{staticClass:\"fa fa-plus-square\"}),_vm._v(\"\\n                                Add New\\n                            \")])])]),_vm._v(\" \"),_c('div',{staticClass:\"card-body p-2\"},[_c('form',{attrs:{\"autocomplete\":\"off\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.getResults()}}},[_c('div',{staticClass:\"form-row\"},[_c('div',{staticClass:\"col col-3 pt-2\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.search),expression:\"search\"}],staticClass:\"form-control\",attrs:{\"placeholder\":\"Enter Category ...\"},domProps:{\"value\":(_vm.search)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.search=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"col col-3 pt-2 btn-group\",attrs:{\"role\":\"group\"}},[_c('button',{staticClass:\"btn btn-success\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Search\")]),_vm._v(\" \"),_c('download-excel',{staticClass:\"btn btn-warning ml-2\",attrs:{\"fetch\":_vm.export_csv,\"fields\":_vm.json_fields,\"before-generate\":_vm.startDownload,\"before-finish\":_vm.finishDownload,\"worksheet\":\"My Worksheet\",\"type\":\"csv\",\"name\":\"category_list.csv\"}},[_c('span',{staticClass:\"labelText\"},[_c('i',{staticClass:\"fa fa-file-excel-o\",attrs:{\"aria-hidden\":\"true\"}}),_vm._v(\"\\n                                             Export as\\n                                             CSV\")])])],1)])])]),_vm._v(\" \"),_c('div',{staticClass:\"card-body table-responsive p-0\"},[_c('table',{staticClass:\"table table-hover\"},[_vm._m(0),_vm._v(\" \"),_c('tbody',_vm._l((_vm.categories.data),function(category,x){return _c('tr',{key:category.id},[_c('td',[_vm._v(_vm._s(_vm.categories.from + x))]),_vm._v(\" \"),_c('td',{staticClass:\"text-capitalize\"},[_vm._v(_vm._s(category.name))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(category.parent_category ? category.parent_category.name : '-'))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(category.created_by_name))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(_vm._f(\"myDate\")(category.created_at)))]),_vm._v(\" \"),_c('td',[_c('a',{staticClass:\"btn btn-success btn-sm\",attrs:{\"href\":\"javascript:void(0);\"},on:{\"click\":function($event){return _vm.editModal(category)}}},[_vm._v(\"\\n                                            Edit\\n                                        \")]),_vm._v(\" \"),(!category.parent_category)?_c('router-link',{staticClass:\"btn btn-primary btn-sm\",attrs:{\"to\":'/machines/category/settings/' + category.id}},[_vm._v(\"PM\\n                                            Settings\")]):_vm._e()],1)])}),0)])]),_vm._v(\" \"),_c('div',{staticClass:\"card-footer\"},[_c('pagination',{attrs:{\"data\":_vm.categories},on:{\"pagination-change-page\":_vm.getResults}})],1)]):_vm._e()])]),_vm._v(\" \"),(!_vm.$gate.isAdmin())?_c('div',[_c('not-found')],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"addNew\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"addNew\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[_c('h5',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.editmode),expression:\"!editmode\"}],staticClass:\"modal-title\"},[_vm._v(\"Create New Category\")]),_vm._v(\" \"),_c('h5',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.editmode),expression:\"editmode\"}],staticClass:\"modal-title\"},[_vm._v(\"Update Category\")]),_vm._v(\" \"),_vm._m(1)]),_vm._v(\" \"),_c('form',{on:{\"submit\":function($event){$event.preventDefault();_vm.editmode ? _vm.updateCategory() : _vm.createCategory()}}},[_c('div',{staticClass:\"modal-body\"},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Name\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.name),expression:\"form.name\"}],staticClass:\"form-control\",class:{ 'is-invalid': _vm.form.errors.has('name') },attrs:{\"type\":\"text\",\"name\":\"name\"},domProps:{\"value\":(_vm.form.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"name\", $event.target.value)}}}),_vm._v(\" \"),_c('has-error',{attrs:{\"form\":_vm.form,\"field\":\"name\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Parent Category\")]),_vm._v(\" \"),_c('v-select',{class:{ 'is-invalid': _vm.form.errors.has('parent_id') },attrs:{\"label\":\"name\",\"reduce\":function (option) { return option.id; },\"options\":_vm.parent_categories,\"placeholder\":\"Select Parent category ...\"},model:{value:(_vm.form.parent_id),callback:function ($$v) {_vm.$set(_vm.form, \"parent_id\", $$v)},expression:\"form.parent_id\"}}),_vm._v(\" \"),_c('has-error',{attrs:{\"form\":_vm.form,\"field\":\"parent_id\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"Close\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.editmode),expression:\"editmode\"}],staticClass:\"btn btn-success\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Update\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.editmode),expression:\"!editmode\"}],staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Create\")])])])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"Sl. No\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Name\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Parent Category\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Created By\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Created On\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Action\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])}]\nexport { render, staticRenderFns }","<template>\n    <section class=\"content\">\n        <div class=\"container-fluid\">\n            <div class=\"row\">\n\n                <div class=\"col-12\">\n\n                    <div class=\"card\" v-if=\"$gate.isAdmin()\">\n                        <div class=\"card-header\">\n                            <h3 class=\"card-title\">Category List</h3>\n\n                            <div class=\"card-tools\">\n\n                                <button type=\"button\" class=\"btn btn-sm btn-primary\" @click=\"newModal\">\n                                    <i class=\"fa fa-plus-square\"></i>\n                                    Add New\n                                </button>\n                            </div>\n                        </div>\n                        <div class=\"card-body p-2\">\n                            <form autocomplete=\"off\" @submit.prevent=\"getResults()\">\n                                <div class=\"form-row\">\n                                    <div class=\"col col-3 pt-2\">\n                                        <input placeholder=\"Enter Category ...\" v-model=\"search\" class=\"form-control\">\n                                    </div>\n                                    <div class=\"col col-3 pt-2 btn-group\" role=\"group\">\n                                        <button type=\"submit\" class=\"btn btn-success\">Search</button>\n                                         <download-excel class=\"btn btn-warning ml-2\" :fetch=\"export_csv\"\n                                             :fields=\"json_fields\" :before-generate=\"startDownload\"\n                                             :before-finish=\"finishDownload\" worksheet=\"My Worksheet\" type=\"csv\"\n                                             name=\"category_list.csv\">\n                                             <span class=\"labelText\"><i class=\"fa fa-file-excel-o\" aria-hidden=\"true\"></i>\n                                                 Export as\n                                                 CSV</span>\n                                         </download-excel>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                        <!-- /.card-header -->\n                        <div class=\"card-body table-responsive p-0\">\n                            <table class=\"table table-hover\">\n                                <thead>\n                                    <tr>\n                                        <th>Sl. No</th>\n                                        <th>Name</th>\n                                        <th>Parent Category</th>\n                                        <th>Created By</th>\n                                        <th>Created On</th>\n                                        <th>Action</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <tr v-for=\"(category, x) in categories.data\" :key=\"category.id\">\n\n                                        <td>{{ categories.from + x }}</td>\n                                        <td class=\"text-capitalize\">{{ category.name }}</td>\n                                        <td>{{ category.parent_category ? category.parent_category.name : '-' }}</td>\n                                        <td>{{ category.created_by_name }}</td>\n                                        <td>{{ category.created_at | myDate }}</td>\n                                        <td>\n\n                                            <a href=\"javascript:void(0);\" @click=\"editModal(category)\"\n                                                class=\"btn btn-success btn-sm\">\n                                                Edit\n                                            </a>\n\n                                            <router-link :to=\"'/machines/category/settings/' + category.id\"\n                                                class=\"btn btn-primary btn-sm\" v-if=\"!category.parent_category\">PM\n                                                Settings</router-link>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                        <!-- /.card-body -->\n                        <div class=\"card-footer\">\n                            <pagination :data=\"categories\" @pagination-change-page=\"getResults\"></pagination>\n                        </div>\n                    </div>\n                    <!-- /.card -->\n                </div>\n            </div>\n\n\n            <div v-if=\"!$gate.isAdmin()\">\n                <not-found></not-found>\n            </div>\n\n            <!-- Modal -->\n            <div class=\"modal fade\" id=\"addNew\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"addNew\" aria-hidden=\"true\">\n                <div class=\"modal-dialog\" role=\"document\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <h5 class=\"modal-title\" v-show=\"!editmode\">Create New Category</h5>\n                            <h5 class=\"modal-title\" v-show=\"editmode\">Update Category</h5>\n                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n\n                        <!-- <form @submit.prevent=\"createUser\"> -->\n\n                        <form @submit.prevent=\"editmode ? updateCategory() : createCategory()\">\n                            <div class=\"modal-body\">\n                                <div class=\"form-group\">\n                                    <label>Name</label>\n                                    <input v-model=\"form.name\" type=\"text\" name=\"name\" class=\"form-control\"\n                                        :class=\"{ 'is-invalid': form.errors.has('name') }\">\n                                    <has-error :form=\"form\" field=\"name\"></has-error>\n                                </div>\n                                <div class=\"form-group\">\n                                    <label>Parent Category</label>\n                                    <v-select label=\"name\" :reduce=\"(option) => option.id\" :options=\"parent_categories\"\n                                        placeholder=\"Select Parent category ...\" v-model=\"form.parent_id\"\n                                        :class=\"{ 'is-invalid': form.errors.has('parent_id') }\">\n                                    </v-select>\n                                    <has-error :form=\"form\" field=\"parent_id\"></has-error>\n                                </div>\n                            </div>\n                            <div class=\"modal-footer\">\n                                <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n                                <button v-show=\"editmode\" type=\"submit\" class=\"btn btn-success\">Update</button>\n                                <button v-show=\"!editmode\" type=\"submit\" class=\"btn btn-primary\">Create</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            search: '',\n            editmode: false,\n            categories: {},\n            parent_categories: [],\n            form: new Form({\n                id: '',\n                name: '',\n                parent_id: '',\n            }),\n\n            json_fields: {\n                'Category Name': 'name',\n                'Parent Category Name': {\n                    field: 'parent_category',\n                    callback: (value) => {\n                        return value ? value.name : '-';\n                    }\n                },\n                'Created By':'created_by_name',\n\n            },\n\n            json_meta: [\n                [{\n                    key: \"charset\",\n                    value: \"utf-8\",\n                }, ],\n            ],\n        }\n    },\n    methods: {\n\n         async export_csv() {\n                const response = await axios.get('api/category?export=1', {\n                    params: {\n                    search: this.search\n                }\n                });\n                return response.data.data;\n            },\n            startDownload() {\n                Swal.fire({\n                    title: 'Please Wait !',\n                    html: 'Data populating', // add html attribute if you want or remove\n                    allowOutsideClick: false,\n                    onBeforeOpen: () => {\n                        Swal.showLoading()\n                    },\n                });\n            },\n            finishDownload() {\n                Swal.close()\n            },\n\n        getResults(page = 1) {\n            this.$Progress.start();\n            axios.get('/api/category', {\n                params: {\n                    page: page,\n                    search: this.search\n                }\n            }).then(({\n                data\n            }) => (this.categories = data.data));\n            this.$Progress.finish();\n        },\n        updateCategory() {\n            this.$Progress.start();\n            this.form.put('/api/category/' + this.form.id)\n                .then((response) => {\n                    // success\n                    $('#addNew').modal('hide');\n                    Toast.fire({\n                        icon: 'success',\n                        title: response.data.message\n                    });\n                    this.$Progress.finish();\n                    //  Fire.$emit('AfterCreate');\n                    this.loadCategories();\n                })\n                .catch(() => {\n                    this.$Progress.fail();\n                });\n\n        },\n        editModal(category) {\n            this.editmode = true;\n            this.form.reset();\n            $('#addNew').modal('show');\n            this.form.fill(category);\n        },\n        newModal() {\n            this.editmode = false;\n            this.form.reset();\n            $('#addNew').modal('show');\n        },\n\n        loadCategories() {\n            if (this.$gate.isAdmin()) {\n                axios.get(\"/api/category\").then(({\n                    data\n                }) => (this.categories = data.data));\n                this.get_parent_cat();\n            }\n        },\n\n        createCategory() {\n            this.form.post('/api/category')\n                .then((response) => {\n                    $('#addNew').modal('hide');\n                    Toast.fire({\n                        icon: 'success',\n                        title: response.data.message\n                    });\n                    this.$Progress.finish();\n                    this.loadCategories();\n                })\n                .catch(() => {\n                    Toast.fire({\n                        icon: 'error',\n                        title: 'Some error occured! Please try again'\n                    });\n                })\n        },\n\n        async get_parent_cat() {\n            axios.get(\"/api/category/list\").then(({\n                data\n            }) => (this.parent_categories = data.data));\n        }\n    },\n\n    created() {\n        this.$Progress.start();\n        this.loadCategories();\n        this.$Progress.finish();\n    }\n}\n</script>\n"],"sourceRoot":""}